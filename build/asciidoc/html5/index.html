<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="Version 3.10">
<title>Hazelcast IMDG Reference Manual</title>
<style>
@import url(https://fonts.googleapis.com/css?family=Cousine);
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 16px; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: #444444; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #4183c4; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #4183c4; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: helvetica, arial, freesans, clean, sans-serif; font-weight: normal; font-size: 1em; line-height: 1.5; margin-bottom: 0.9375em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: helvetica, arial, freesans, clean, sans-serif; font-weight: bold; font-style: normal; color: #333333; text-rendering: optimizeLegibility; margin-top: 0.2em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: gray; line-height: 0; }

h1 { font-size: 1.25em; }

h2 { font-size: 0.875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 0.8125em; }

h4 { font-size: 0.6875em; }

h5 { font-size: 1em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Cousine, Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #c83b41; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.5; margin-bottom: 0.9375em; list-style-position: outside; font-family: helvetica, arial, freesans, clean, sans-serif; }

ul, ol { margin-left: 0.65625em; }
ul.no-bullet, ol.no-bullet { margin-left: 0.65625em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #333333; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 0.9375em; padding: 0; border-left: none; }
blockquote cite { display: block; font-size: 0.8125em; color: #666666; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #666666; }

blockquote, blockquote p { line-height: 1.5; color: #666666; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 1.875em; }
  h2 { font-size: 1.5em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.125em; }
  h4 { font-size: 1em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: 0.875em; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: 0.9375em; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.5; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

a:hover, a:focus { text-decoration: underline; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.9375em; font-style: normal !important; letter-spacing: 0; padding: 1px 5px 1px 5px; background-color: #f7f7f7; border: 1px solid #dddddd; -webkit-border-radius: 3px; border-radius: 3px; line-height: inherit; word-wrap: break-word; }
*:not(pre) > code.nobreak { word-wrap: normal; }
*:not(pre) > code.nowrap { white-space: nowrap; }

pre, pre > code { line-height: 1.45; color: #333333; font-family: Cousine, Consolas, "Liberation Mono", Courier, monospace; font-size: 0.9375em; font-weight: normal; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #666666; }

kbd { font-family: Cousine, Consolas, "Liberation Mono", Courier, monospace; display: inline-block; color: #333333; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: #333333; font-weight: 300; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #dddddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #dddddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #dddddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #666666; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #666666; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #666666; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: #333333; font-weight: 300; border-bottom: 1px solid #dddddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 0 solid #dddddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: helvetica, arial, freesans, clean, sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #444444; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f7f7f7; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #dedede; margin-bottom: 1.25em; padding: 1.25em; background: #f7f7f7; -webkit-border-radius: 3px; border-radius: 3px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: whitesmoke; padding: 1.25em; }

#footer-text { color: #333333; line-height: 1.35; }

#content { margin-bottom: 0.625em; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { #content { margin-bottom: 1.25em; }
  .sect1 { padding-bottom: 1.25em; } }
.sect1:last-child { padding-bottom: 0; }

.sect1 + .sect1 { border-top: 0 solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #333333; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #262626; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; font-size: 1rem; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: #333333; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: helvetica, arial, freesans, clean, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #666666; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 3px; border-radius: 3px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #dedede; margin-bottom: 1.25em; padding: 1.25em; background: #f7f7f7; -webkit-border-radius: 3px; border-radius: 3px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #444444; margin-top: 0; border-width: 0 0 1px 0; border-style: solid; border-color: #cacaca; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #f9f9f9; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 2px solid #d4d4d4; -webkit-border-radius: 3px; border-radius: 3px; word-wrap: break-word; padding: 0.75em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #f9f9f9; background-color: #333333; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 0.75em; -webkit-border-radius: 3px; border-radius: 3px; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.45; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 0.9375em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #666666; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #444444; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #666666; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 0.9375em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #666666; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: #666666; }

.quoteblock.abstract { margin: 0 0 0.9375em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dddddd; }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 1px 1px 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 1px 1px 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 1px 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 1px 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 1px 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.5; background: whitesmoke; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 0.90625em; }

ul li ol { margin-left: 0.65625em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.46875em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { display: -ms-flexbox; display: -webkit-box; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; list-style: none; margin: 0 0 0.46875em -0.9375em; }

ul.inline > li { margin-left: 0.9375em; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 0.9375em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist td:not([class]):first-child { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist td:not([class]):first-child img { max-width: none; }
.colist td:not([class]):last-child { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; margin-left: -1.05em; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #2e6295; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #333333; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1em; color: #666666; }

h2 { color: #325D72; border-bottom: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { color: #333333; }

#header, #content, #footnotes { max-width: 700px; padding-left: 0; padding-right: 0; }

body.toc2.toc-left #toc.toc2 #toctitle { font-size: 0.9375em; }

.olist.procedure > ol { counter-reset: li; list-style: none; position: relative; }
.olist.procedure > ol > li { position: relative; padding: 5px 0 5px 55px; margin-bottom: 5px; }
.olist.procedure > ol > li:before { content: counter(li); counter-increment: li; position: absolute; top: 0; left: 0; height: 100%; width: 30px; padding: 0 10px 0 0; color: #999; font-size: 1.375em; font-weight: bold; line-height: 1.6; text-align: right; border-right: 1px solid #ddd; }

.quoteblock blockquote { padding-left: 1em; }

.sidebarblock > .content > .title { margin-top: -20px; margin-right: -20px; margin-left: -20px; margin-bottom: 20px; padding: 1em; font-size: 0.75em; background: #eaeaea; }

.literalblock pre, .listingblock pre { background: #f9f9f9; font-size: 0.9375em; }

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Hazelcast IMDG Reference Manual</h1>
<div class="details">
<span id="author" class="author">Version 3.10</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Hazelcast IMDG 3.10 Reference Manual</div>
<ul class="sectlevel1">
<li><a href="#preface">Preface</a>
<ul class="sectlevel2">
<li><a href="#hazelcast-imdg-editions">Hazelcast IMDG Editions</a></li>
<li><a href="#hazelcast-imdg-architecture">Hazelcast IMDG Architecture</a></li>
<li><a href="#hazelcast-imdg-plugins">Hazelcast IMDG Plugins</a></li>
<li><a href="#licensing">Licensing</a></li>
<li><a href="#trademarks">Trademarks</a></li>
<li><a href="#customer-support">Customer Support</a></li>
<li><a href="#release-ntoes">Release Notes</a></li>
<li><a href="#contributing-to-hazelcast-imdg">Contributing to Hazelcast IMDG</a></li>
<li><a href="#partners">Partners</a></li>
<li><a href="#phone-home">Phone Home</a></li>
</ul>
</li>
<li><a href="#document-revision-history">1. Document Revision History</a></li>
<li><a href="#getting-started">2. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#installation">2.1. Installation</a></li>
<li><a href="#setting-the-license-key">2.2. Setting the License Key</a></li>
<li><a href="#upgrading-from-3x">2.3. Upgrading from 3.x</a></li>
<li><a href="#upgrading-from-2x">2.4. Upgrading from 2.x</a></li>
<li><a href="#starting-the-member-and-client">2.5. Starting the Member and Client</a></li>
<li><a href="#using-the-scripts-in-the-package">2.6. Using the Scripts In The Package</a></li>
<li><a href="#deploying-on-amazon-ec2">2.7. Deploying On Amazon EC2</a></li>
<li><a href="#deploying-on-microsoft-azure">2.8. Deploying On Microsoft Azure</a></li>
<li><a href="#deploying-on-pivotal-cloud-foundry">2.9. Deploying On Pivotal Cloud Foundry</a></li>
<li><a href="#deploying-using-docker">2.10. Deploying using Docker</a></li>
</ul>
</li>
<li><a href="#hazelcast-overview">3. Hazelcast Overview</a>
<ul class="sectlevel2">
<li><a href="#sharding-in-hazelcast">3.1. Sharding in Hazelcast</a></li>
<li><a href="#hazelcat-topology">3.2. Hazelcast Topology</a></li>
<li><a href="#why-hazelcast">3.3. Why Hazelcast?</a></li>
<li><a href="#data-partitioning">3.4. Data Partitioning</a></li>
<li><a href="#use-cases">3.5. Use Cases</a></li>
<li><a href="#resources">3.6. Resources</a></li>
</ul>
</li>
<li><a href="#understanding-configuration">4. Understanding Configuration</a>
<ul class="sectlevel2">
<li><a href="#configuring-declaratively">4.1. Configuring Declaratively</a></li>
<li><a href="#configuring-programmatically">4.2. Configuring Programmatically</a></li>
<li><a href="#configuring-with-system-properties">4.3. Configuring with System Properties</a></li>
<li><a href="#configuring-within-spring-context">4.4. Configuring within Spring Context</a></li>
<li><a href="#dynamically-adding-data-structure-configuration-on-a-cluster">4.5. Dynamically Adding Data Structure Configuration on a Cluster</a></li>
<li><a href="#checking-configuration">4.6. Checking Configuration</a></li>
<li><a href="#configuration-pattern-matcher">4.7. Configuration Pattern Matcher</a></li>
<li><a href="#using-wildcards">4.8. Using Wildcards</a></li>
<li><a href="#using-variables">4.9. Using Variables</a></li>
</ul>
</li>
<li><a href="#setting-up-clusters">5. Setting Up Clusters</a>
<ul class="sectlevel2">
<li><a href="#discovery-mechanisms">5.1. Discovery Mechanisms</a></li>
<li><a href="#discovering-members-by-tcp">5.2. Discovering Members by TCP</a></li>
<li><a href="#discovering-members-by-multicast">5.3. Discovering Members by Multicast</a></li>
<li><a href="#discovering-native-clients">5.4. Discovering Native Clients</a></li>
<li><a href="#creating-cluster-groups">5.5. Creating Cluster Groups</a></li>
<li><a href="#member-user-code-deployment-beta">5.6. Member User Code Deployment - BETA</a></li>
<li><a href="#client-user-code-deployment-beta">5.7. Client User Code Deployment - BETA</a></li>
<li><a href="#partition-group-configuration">5.8. Partition Group Configuration</a></li>
<li><a href="#logging-configuration">5.9. Logging Configuration</a></li>
<li><a href="#other-network-configurations">5.10. Other Network Configurations</a></li>
<li><a href="#failure-detector-configuration">5.11. Failure Detector Configuration</a></li>
</ul>
</li>
<li><a href="#rolling-member-upgrades">6. Rolling Member Upgrades</a>
<ul class="sectlevel2">
<li><a href="#terminology">6.1. Terminology</a></li>
<li><a href="#hazelcast-members-compatibility-guarantees">6.2. Hazelcast Members Compatibility Guarantees</a></li>
<li><a href="#rolling-upgrade-procedure">6.3. Rolling Upgrade Procedure</a></li>
<li><a href="#network-partitions-and-rolling-upgrades">6.4. Network Partitions and Rolling Upgrades</a></li>
<li><a href="#rolling-upgrade-faq">6.5. Rolling Upgrade FAQ</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Welcome to the Hazelcast IMDG (In-Memory Data Grid) Reference Manual. This manual includes concepts, instructions, and samples to guide you on how to use Hazelcast and build Hazelcast IMDG applications.</p>
</div>
<div class="paragraph">
<p>As the reader of this manual, you must be familiar with the Java programming language and you should have installed your preferred Integrated Development Environment (IDE).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preface"><a class="anchor" href="#preface"></a><a class="link" href="#preface">Preface</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Welcome to the Hazelcast IMDG (In-Memory Data Grid) Reference Manual. This manual includes concepts, instructions, and samples to guide you on how to use Hazelcast and build Hazelcast IMDG applications.</p>
</div>
<div class="paragraph">
<p>As the reader of this manual, you must be familiar with the Java programming language and you should have installed your preferred Integrated Development Environment (IDE).</p>
</div>
<div class="sect2">
<h3 id="hazelcast-imdg-editions"><a class="anchor" href="#hazelcast-imdg-editions"></a><a class="link" href="#hazelcast-imdg-editions">Hazelcast IMDG Editions</a></h3>
<div class="paragraph">
<p>This Reference Manual covers all editions of Hazelcast IMDG. Throughout this manual:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Hazelcast</strong> or <strong>Hazelcast IMDG</strong> refers to the open source edition of Hazelcast in-memory data grid middleware. <strong>Hazelcast</strong> is also the name of the company (Hazelcast, Inc.) providing the Hazelcast product.</p>
</li>
<li>
<p><strong class="blue">Hazelcast IMDG Enterprise</strong> is a commercially licensed edition of Hazelcast IMDG which provides high-value enterprise features in addition to Hazelcast IMDG.</p>
</li>
<li>
<p><strong class="navy">Hazelcast IMDG Enterprise HD</strong> is a commercially licensed edition of Hazelcast IMDG which provides High-Density (HD) Memory Store and Hot Restart Persistence features in addition to Hazelcast IMDG Enterprise.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="hazelcast-imdg-architecture"><a class="anchor" href="#hazelcast-imdg-architecture"></a><a class="link" href="#hazelcast-imdg-architecture">Hazelcast IMDG Architecture</a></h3>
<div class="paragraph">
<p>You can see the features for all Hazelcast IMDG editions in the following architecture diagram.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/HazelcastArchitecture.png" alt="Hazelcast Architecture">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can see small "HD" boxes for some features in the above diagram. Those features can use High-Density (HD) Memory Store when it is available. It means if you have Hazelcast IMDG Enterprise HD, you can use those features with HD Memory Store.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information on Hazelcast IMDG&#8217;s Architecture, please see the white paper <a href="https://hazelcast.com/resources/architects-view-hazelcast/">An Architect&#8217;s View of Hazelcast</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="hazelcast-imdg-plugins"><a class="anchor" href="#hazelcast-imdg-plugins"></a><a class="link" href="#hazelcast-imdg-plugins">Hazelcast IMDG Plugins</a></h3>
<div class="paragraph">
<p>You can extend Hazelcast IMDG&#8217;s functionality by using its plugins. These plugins have their own lifecycles. Please see <a href="https://hazelcast.org/plugins/">Plugins page</a> to learn about Hazelcast plugins you can use. Hazelcast plugins are marked with <span class="image"><img src="images/Plugin_New.png" alt="Plugin" width="54" height="12"></span> label throughout this manual.</p>
</div>
</div>
<div class="sect2">
<h3 id="licensing"><a class="anchor" href="#licensing"></a><a class="link" href="#licensing">Licensing</a></h3>
<div class="paragraph">
<p>Hazelcast IMDG and Hazelcast Reference Manual are free and provided under the Apache License, Version 2.0. Hazelcast IMDG Enterprise and Hazelcast IMDG Enterprise HD is commercially licensed by Hazelcast, Inc.</p>
</div>
<div class="paragraph">
<p>For more detailed information on licensing, please see the <a href="#license-questions">License Questions appendix</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="trademarks"><a class="anchor" href="#trademarks"></a><a class="link" href="#trademarks">Trademarks</a></h3>
<div class="paragraph">
<p>Hazelcast is a registered trademark of Hazelcast, Inc. All other trademarks in this manual are held by their respective owners.</p>
</div>
</div>
<div class="sect2">
<h3 id="customer-support"><a class="anchor" href="#customer-support"></a><a class="link" href="#customer-support">Customer Support</a></h3>
<div class="paragraph">
<p>Support for Hazelcast is provided via <a href="https://github.com/hazelcast/hazelcast/issues">GitHub</a>, <a href="https://groups.google.com/forum/#!forum/hazelcast">Mail Group</a> and <a href="http://www.stackoverflow.com">StackOverflow</a>.</p>
</div>
<div class="paragraph">
<p>For information on the commercial support for Hazelcast IMDG and Hazelcast IMDG Enterprise, please see
<a href="https://hazelcast.com/pricing/">hazelcast.com</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="release-ntoes"><a class="anchor" href="#release-ntoes"></a><a class="link" href="#release-ntoes">Release Notes</a></h3>
<div class="paragraph">
<p>Please refer to the <a href="http://docs.hazelcast.org/docs/release-notes/">Release Notes document</a> for the new features, enhancements and fixes performed for each Hazelcast IMDG release.</p>
</div>
</div>
<div class="sect2">
<h3 id="contributing-to-hazelcast-imdg"><a class="anchor" href="#contributing-to-hazelcast-imdg"></a><a class="link" href="#contributing-to-hazelcast-imdg">Contributing to Hazelcast IMDG</a></h3>
<div class="paragraph">
<p>You can contribute to the Hazelcast IMDG code, report a bug, or request an enhancement. Please see the following resources.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://hazelcast.atlassian.net/wiki/display/COM/Developing+with+Git">Developing with Git</a>: Document that explains the branch mechanism of Hazelcast and how to request changes.</p>
</li>
<li>
<p><a href="https://hazelcast.atlassian.net/wiki/display/COM/Hazelcast+Contributor+Agreement">Hazelcast Contributor Agreement form</a>: Form that each contributing developer needs to fill and send back to Hazelcast.</p>
</li>
<li>
<p><a href="https://github.com/hazelcast/hazelcast">Hazelcast on GitHub</a>: Hazelcast repository where the code is developed, issues and pull requests are managed.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="partners"><a class="anchor" href="#partners"></a><a class="link" href="#partners">Partners</a></h3>
<div class="paragraph">
<p>Hazelcast partners with leading hardware and software technologies, system integrators, resellers and OEMs including Amazon Web Services, Vert.x, Azul Systems, C2B2. Please see the <a href="https://hazelcast.com/partners/">Partners</a> page for the full list of and information on our partners.</p>
</div>
</div>
<div class="sect2">
<h3 id="phone-home"><a class="anchor" href="#phone-home"></a><a class="link" href="#phone-home">Phone Home</a></h3>
<div class="paragraph">
<p>Hazelcast uses phone home data to learn about usage of Hazelcast IMDG.</p>
</div>
<div class="paragraph">
<p>Hazelcast IMDG member instances call our phone home server initially when they are started and then every 24 hours. This applies to all the instances joined to the cluster.</p>
</div>
<div class="paragraph">
<p><strong>What is sent in?</strong></p>
</div>
<div class="paragraph">
<p>The following information is sent in a phone home:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hazelcast IMDG version</p>
</li>
<li>
<p>Local Hazelcast IMDG member UUID</p>
</li>
<li>
<p>Download ID</p>
</li>
<li>
<p>A hash value of the cluster ID</p>
</li>
<li>
<p>Cluster size bands for 5, 10, 20, 40, 60, 100, 150, 300, 600 and &gt; 600</p>
</li>
<li>
<p>Number of connected clients bands of 5, 10, 20, 40, 60, 100, 150, 300, 600 and &gt; 600</p>
</li>
<li>
<p>Cluster uptime</p>
</li>
<li>
<p>Member uptime</p>
</li>
<li>
<p>Environment Information:</p>
<div class="ulist">
<ul>
<li>
<p>Name of operating system</p>
</li>
<li>
<p>Kernel architecture (32-bit or 64-bit)</p>
</li>
<li>
<p>Version of operating system</p>
</li>
<li>
<p>Version of installed Java</p>
</li>
<li>
<p>Name of Java Virtual Machine</p>
</li>
</ul>
</div>
</li>
<li>
<p>Hazelcast IMDG Enterprise specific:</p>
<div class="ulist">
<ul>
<li>
<p>Number of clients by language (Java, C++, C#)</p>
</li>
<li>
<p>Flag for Hazelcast Enterprise</p>
</li>
<li>
<p>Hash value of license key</p>
</li>
<li>
<p>Native memory usage</p>
</li>
</ul>
</div>
</li>
<li>
<p>Hazelcast Management Center specific:</p>
<div class="ulist">
<ul>
<li>
<p>Hazelcast Management Center version</p>
</li>
<li>
<p>Hash value of Hazelcast Management Center license key</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Phone Home Code</strong></p>
</div>
<div class="paragraph">
<p>The phone home code itself is open source. Please see <a href="https://github.com/hazelcast/hazelcast/blob/master/hazelcast/src/main/java/com/hazelcast/util/PhoneHome.java">here</a>.</p>
</div>
<div class="paragraph">
<p><strong>Disabling Phone Homes</strong></p>
</div>
<div class="paragraph">
<p>Set the <code>hazelcast.phone.home.enabled</code> system property to false either in the config or on the Java command line. Please see the <a href="#system-properties">System Properties section</a> for information on how to set a property.</p>
</div>
<div class="paragraph">
<p>You can also disable the phone home using the environment variable <code>HZ_PHONE_HOME_ENABLED</code>. Simply add the following line to your <code>.bash_profile</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">export</span> HZ_PHONE_HOME_ENABLED=<span class="predefined-constant">false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Phone Home URLs</strong></p>
</div>
<div class="paragraph">
<p>For versions 1.x and 2.x: <a href="http://www.hazelcast.com/version.jsp" class="bare">http://www.hazelcast.com/version.jsp</a>.</p>
</div>
<div class="paragraph">
<p>For versions 3.x up to 3.6: <a href="http://versioncheck.hazelcast.com/version.jsp" class="bare">http://versioncheck.hazelcast.com/version.jsp</a>.</p>
</div>
<div class="paragraph">
<p>For versions after 3.6: <a href="http://phonehome.hazelcast.com/ping" class="bare">http://phonehome.hazelcast.com/ping</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="document-revision-history"><a class="anchor" href="#document-revision-history"></a><a class="link" href="#document-revision-history">1. Document Revision History</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter lists the changes made to this document from the previous release.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please refer to the <a href="http://docs.hazelcast.org/docs/rn/">Release Notes</a> for the new features, enhancements and fixes performed for each Hazelcast release.*
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Revision History</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chapter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Section</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Distributed Data Structures and Distributed Computing</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added content for the data structures that now support Split-Brain Protection: IExecutorService, DurableExecutorService, IScheduledExecutorService, MultiMap, ISet, IList, Ringbuffer, Replicated Map, Cardinality Estimator, IAtomicLong, IAtomicReference, ISemaphore, ICountdownLatch.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#distributed-data-structures">Distributed Data Structures</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#flakeidgenerator">FlakeIdGenerator</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added a new section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#idgenerator">IdGenerator</a>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[Migrating to FlakeIdGenerator](#migrating-to-flakeidgenerator) added as a new section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#pn-counter">PN Counter</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added as a new section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#distributed-query">Distributed Query</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#query-requests-from-clients">Queries Requests from Client</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added as a new section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#distributed-computing">Distributed Computing</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#entry-processor">Entry Processor</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added <a href="#respecting-locks-on-single-keys">Respecting Locks on Single Keys</a> as a new section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#hazelcast-jcache">Hazelcast JCache</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added <a href="#supported-jcache-versions">Supported JCache Versions</a> as a new section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#hazelcast-clients">Hazelcast Clients</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added <a href="#configuring-reliable-topic-at-client-side">Configuring Reliable Topic at Client Side</a> as a new section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#management">Management</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added <a href="#using-health-check-on-f5-big-ip-ltm">Using Health Check on F5 BIG-IP LTM</a> as a new section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#managing-cluster-and-member-states">Managing Cluster and Member States</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added more information on the state <code>NO_MIGRATION</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#wan">WAN</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#defining-wan-replication">Defining WAN Replication</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added information on the property <code>discovery.useEndpointPrivateAddress</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#system-properties">System Properties</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Added definitions for the following system properties:</p>
<p class="tableblock">* hazelcast.partition.migration.fragments.enabled
* hazelcast.mastership.claim.member.list.version.increment
* hazelcast.multicast.group</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="getting-started"><a class="anchor" href="#getting-started"></a><a class="link" href="#getting-started">2. Getting Started</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter explains how to install Hazelcast and start a Hazelcast member and client. It describes the executable files in the download package and also provides the fundamentals for configuring Hazelcast and its deployment options.</p>
</div>
<div class="sect2">
<h3 id="installation"><a class="anchor" href="#installation"></a><a class="link" href="#installation">2.1. Installation</a></h3>
<div class="paragraph">
<p>The following sections explain the installation of Hazelcast IMDG and Hazelcast IMDG Enterprise. It also includes notes and changes to consider when upgrading Hazelcast.</p>
</div>
<div class="sect3">
<h4 id="installing-hazelcast-imdg"><a class="anchor" href="#installing-hazelcast-imdg"></a><a class="link" href="#installing-hazelcast-imdg">2.1.1. Installing Hazelcast IMDG</a></h4>
<div class="paragraph">
<p>You can find Hazelcast in standard Maven repositories. If your project uses Maven, you do not need to add
additional repositories to your <code>pom.xml</code> or add <code>hazelcast-&lt;version&gt;.jar</code> file into your
classpath (Maven does that for you). Just add the following lines to your <code>pom.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependencies&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
                <span class="tag">&lt;groupId&gt;</span>com.hazelcast<span class="tag">&lt;/groupId&gt;</span>
                <span class="tag">&lt;artifactId&gt;</span>hazelcast<span class="tag">&lt;/artifactId&gt;</span>
                <span class="tag">&lt;version&gt;</span>Hazelcast IMDG Version To Be Installed<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As an alternative, you can download and install Hazelcast IMDG yourself. You only need to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download the package <code>hazelcast-&lt;version&gt;.zip</code> or <code>hazelcast-&lt;version&gt;.tar.gz</code> from <a href="https://hazelcast.org/download">hazelcast.org</a>.</p>
</li>
<li>
<p>Extract the downloaded <code>hazelcast-&lt;version&gt;.zip</code> or <code>hazelcast-&lt;version&gt;.tar.gz</code>.</p>
</li>
<li>
<p>Add the file <code>hazelcast-&lt;version&gt;.jar</code> to your classpath.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="installing-hazelcast-imdg-enterprise"><a class="anchor" href="#installing-hazelcast-imdg-enterprise"></a><a class="link" href="#installing-hazelcast-imdg-enterprise">2.1.2. Installing Hazelcast IMDG Enterprise</a></h4>
<div class="paragraph">
<p>There are two Maven repositories defined for Hazelcast IMDG Enterprise:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;repository&gt;
       &lt;id&gt;Hazelcast Private Snapshot Repository&lt;/id&gt;
       &lt;url&gt;https:<span class="comment">//repository-hazelcast-l337.forge.cloudbees.com/snapshot/&lt;/url&gt;</span>
&lt;/repository&gt;
&lt;repository&gt;
        &lt;id&gt;Hazelcast Private Release Repository&lt;/id&gt;
        &lt;url&gt;https:<span class="comment">//repository-hazelcast-l337.forge.cloudbees.com/release/&lt;/url&gt;</span>
&lt;/repository&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hazelcast IMDG Enterprise customers may also define dependencies, a sample of which is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;dependency&gt;
      &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;
      &lt;artifactId&gt;hazelcast-enterprise&lt;/artifactId&gt;
      &lt;version&gt;Hazelcast IMDG Enterprise Version To Be Installed&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
      &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;
      &lt;artifactId&gt;hazelcast-enterprise-all&lt;/artifactId&gt;
      &lt;version&gt;Hazelcast IMDG Enterprise Version To Be Installed&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="setting-the-license-key"><a class="anchor" href="#setting-the-license-key"></a><a class="link" href="#setting-the-license-key">2.2. Setting the License Key</a></h3>
<div class="paragraph">
<p>Hazelcast IMDG Enterprise offers you two types of licenses: <strong>Enterprise</strong> and <strong>Enterprise HD</strong>. The supported features differ in your Hazelcast setup according to the license type you own.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Enterprise license</strong>: In addition to the open source edition of Hazelcast, Enterprise features are the following:</p>
<div class="ulist">
<ul>
<li>
<p>Security</p>
</li>
<li>
<p>WAN Replication</p>
</li>
<li>
<p>Clustered REST</p>
</li>
<li>
<p>Clustered JMX</p>
</li>
<li>
<p>Striim Hot Cache</p>
</li>
<li>
<p>Rolling Upgrades</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Enterprise HD license</strong>: In addition to the Enterprise features, Enterprise HD features are the following:</p>
<div class="ulist">
<ul>
<li>
<p>High-Density Memory Store</p>
</li>
<li>
<p>Hot Restart Persistence</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To use Hazelcast IMDG Enterprise, you need to set the provided license key using one of the configuration methods shown below.</p>
</div>
<div class="paragraph">
<p><strong>Declarative Configuration:</strong></p>
</div>
<div class="paragraph">
<p>Add the below line to any place you like in the file <code>hazelcast.xml</code>. This XML file offers you a declarative way to configure your Hazelcast. It is included in the Hazelcast download package. When you extract the downloaded package, you will see the file <code>hazelcast.xml</code> under the <code>/bin</code> directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
  ...
  <span class="tag">&lt;license-key&gt;</span>Your Enterprise License Key<span class="tag">&lt;/license-key&gt;</span>
  ...
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Client Declarative Configuration:</strong></p>
</div>
<div class="paragraph">
<p>Native client distributions (Java, C++, etc.) of Hazelcast are open source. However, there are some Hazelcast Enterprise features which can be used with the Java Client such as SSL, Socket Interceptors, High-Density backed Near Cache, etc. In that case, you also need to have a Hazelcast Enterprise license and you should include this license in the file <code>hazelcast-client-full.xml</code> which is located under the directory <code>src/main/resources</code> of your <code>hazelcast-client</code> package. Set the license key in the <code>hazelcast-client-full.xml</code> as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast-client&gt;</span>
  ...
  <span class="tag">&lt;license-key&gt;</span>Your Enterprise License Key<span class="tag">&lt;/license-key&gt;</span>
  ...
<span class="tag">&lt;/hazelcast-client&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic Configuration:</strong></p>
</div>
<div class="paragraph">
<p>Alternatively, you can set your license key programmatically as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config();
config.setLicenseKey( <span class="string"><span class="delimiter">&quot;</span><span class="content">Your Enterprise License Key</span><span class="delimiter">&quot;</span></span> );</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Spring XML Configuration:</strong></p>
</div>
<div class="paragraph">
<p>If you are using Spring with Hazelcast, then you can set the license key using the Spring XML schema, as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hz:config&gt;</span>
  ...
  <span class="tag">&lt;hz:license-key&gt;</span>Your Enterprise License Key<span class="tag">&lt;/hz:license-key&gt;</span>
  ...
<span class="tag">&lt;/hz:config&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>JVM System Property:</strong></p>
</div>
<div class="paragraph">
<p>As another option, you can set your license key using the below command (the "-D" command line option).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">-Dhazelcast.enterprise.license.key=Your Enterprise License <span class="predefined-type">Key</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="license-key-format"><a class="anchor" href="#license-key-format"></a><a class="link" href="#license-key-format">2.2.1. License Key Format</a></h4>
<div class="paragraph">
<p>License keys have the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;<span class="predefined-type">Name</span> of the Hazelcast edition&gt;<span class="error">#</span>&lt;Count of the Members&gt;<span class="error">#</span>&lt;License key&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The strings before the <code>&lt;License key&gt;</code> is the human readable part. You can use your license key with or without this human readable part. So, both the following example license keys are valid:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">HazelcastEnterpriseHD<span class="error">#</span><span class="integer">2</span>Nodes<span class="error">#</span><span class="integer">1</span>q2w3e4r5t</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="integer">1</span>q2w3e4r5t</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="upgrading-from-3x"><a class="anchor" href="#upgrading-from-3x"></a><a class="link" href="#upgrading-from-3x">2.3. Upgrading from 3.x</a></h3>
<div class="ulist">
<ul>
<li>
<p><strong>Upgrading from 3.6.x to 3.7.x when using <code>JCache</code>:</strong> Hazelcast 3.7 introduced changes in <code>JCache</code> implementation which broke compatibility of 3.6.x clients to 3.7-3.7.2 cluster members and vice versa, so 3.7-3.7.2 clients are also incompatible with 3.6.x cluster members. This issue only affects Java clients which use <code>JCache</code> functionality.</p>
<div class="paragraph">
<p>Starting with Hazelcast 3.7.3, a compatibility option is provided which can be used to ensure backwards compatibility with 3.6.x clients.</p>
</div>
<div class="paragraph">
<p>In order to upgrade a 3.6.x cluster and clients to 3.7.3 (or later), you will need to use this compatibility option on either the member or the client side, depending on which one is upgraded first:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>first upgrade your cluster members to 3.7.3, adding property <code>hazelcast.compatibility.3.6.client=true</code> to your configuration; when started with this property, cluster members are compatible with 3.6.x and 3.7.3+ clients but not with 3.7-3.7.2 clients. Once your cluster is upgraded, you may upgrade your applications to use client version 3.7.3+.</p>
</li>
<li>
<p>upgrade your clients from 3.6.x to 3.7.3, adding property <code>hazelcast.compatibility.3.6.server=true</code> to your Hazelcast client configuration. A 3.7.3 client started with this compatibility option is compatible with 3.6.x and 3.7.3+ cluster members but incompatible with 3.7-3.7.2 cluster members. Once your clients are upgraded, you may then proceed to upgrade your cluster members to version 3.7.3 or later.</p>
<div class="paragraph">
<p>You may use any of the supported ways as described in the <a href="#system-properties">System Properties section</a> to configure the compatibility option. When done upgrading your cluster and clients, you may remove the compatibility property from your Hazelcast member configuration.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Upgrading from 3.6.x to 3.8.x EE when using <code>JCache</code>:</strong> Due to a compatibility problem CacheConfig serialization may not work if your member is 3.8.x where x &lt; 5. Hence, you will need to use the 3.8.5 or higher version where the problem is being fixed.</p>
</li>
<li>
<p><strong>Introducing the <code>spring-aware</code> element:</strong> Before the release 3.5, Hazelcast uses <code>SpringManagedContext</code> to scan <code>SpringAware</code> annotations by default. This may cause some performance overhead for the users who do not use <code>SpringAware</code>.
This behavior has been changed with the release of Hazelcast 3.5. <code>SpringAware</code> annotations are disabled by default. By introducing the <code>spring-aware</code> element, now it is possible to enable it by adding the <code>&lt;hz:spring-aware /&gt;</code> tag to the configuration. Please see the <a href="#integrating-with-spring">Spring Integration section</a>.</p>
</li>
<li>
<p><strong>Introducing new configuration options for WAN replication:</strong> Starting with Hazelcast 3.6, WAN replication related system properties, which are configured on a per member basis, can now be configured per target cluster. The 4 system properties below are no longer valid.</p>
<div class="ulist">
<ul>
<li>
<p><code>hazelcast.enterprise.wanrep.batch.size</code>, please see the <a href="#batch-size">WAN Replication Batch Size</a>.</p>
</li>
<li>
<p><code>hazelcast.enterprise.wanrep.batchfrequency.seconds</code>, please see the <a href="#batch-maximum-delay">WAN Replication Batch Maximum Delay</a>.</p>
</li>
<li>
<p><code>hazelcast.enterprise.wanrep.optimeout.millis</code>, please see the <a href="#response-timeout">WAN Replication Response Timeout</a>.</p>
</li>
<li>
<p><code>hazelcast.enterprise.wanrep.queue.capacity</code>, please see the <a href="#queue-capacity">WAN Replication Queue Capacity</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Removal of deprecated getId() method</strong>: The method <code>getId()</code> in the interface <code>DistributedObject</code> has been removed. Please use the method <code>getName()</code> instead.</p>
</li>
<li>
<p><strong>Change in the Custom Serialization in the C++ Client Distribution</strong>: Before, the method <code>getTypeId()</code> was used to retrieve the ID of the object to be serialized. Now, the method <code>getHazelcastTypeId()</code> is used and you give your object as a parameter to this new method. Also, <code>getTypeId()</code> was used in your custom serializer class, now it has been renamed to <code>getHazelcastTypeId()</code> too. Note that, these changes also apply when you want to switch from Hazelcast 3.6.1 to 3.6.2 too.</p>
</li>
<li>
<p><strong>Important note about Hazelcast System Properties:</strong> Even Hazelcast has not been recommending the usage of <code>GroupProperties.java</code> class while benefiting from System Properties, there has been a change to inform to the users who have been using this class. Starting with Hazelcast 3.7, the class <code>GroupProperties.java</code> has been replaced by <code>GroupProperty.java</code>.
In this new class, system properties are instances of the newly introduced <code>HazelcastProperty</code> object. You can access the names of these properties by calling <code>getName()</code> method of <code>HazelcastProperty</code>.</p>
</li>
<li>
<p><strong>Removal of WanNoDelayReplication</strong>: <code>WanNoDelayReplication</code> implementation of Hazelcast&#8217;s WAN Replication has been removed starting with Hazelcast 3.7. You can still achieve this behavior by setting the batch size to <code>1</code> while configuring the WanBatchReplication. Please refer to the <a href="#defining-wan-replication">Defining WAN Replication section</a> for more information.</p>
</li>
<li>
<p><strong>Introducing &lt;wan-publisher&gt; element</strong>: Starting with Hazelcast 3.8, the configuration element <code>&lt;target-cluster&gt;</code> is replaced with the element <code>&lt;wan-publisher&gt;</code> in WAN replication configuration.</p>
</li>
<li>
<p><strong>WaitNotifyService</strong> interface has been renamed as <strong>OperationParker</strong>.</p>
</li>
<li>
<p><strong>Synchronizing WAN Target Cluster</strong>: Starting with Hazelcast 3.8 release, the URL for the REST call has been changed from
<code><a href="http://member_ip:port/hazelcast/rest/wan/sync/map" class="bare">http://member_ip:port/hazelcast/rest/wan/sync/map</a></code> to <code><a href="http://member_ip:port/hazelcast/rest/mancenter/wan/sync/map" class="bare">http://member_ip:port/hazelcast/rest/mancenter/wan/sync/map</a></code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="upgrading-from-2x"><a class="anchor" href="#upgrading-from-2x"></a><a class="link" href="#upgrading-from-2x">2.4. Upgrading from 2.x</a></h3>
<div class="ulist">
<ul>
<li>
<p><strong>Removal of deprecated static methods:</strong> The static methods of Hazelcast class reaching Hazelcast data components have been removed. The functionality of these methods can be reached from the HazelcastInstance interface. You should replace the following:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Map</span>&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">String</span>&gt; customers = Hazelcast.getMap( <span class="string"><span class="delimiter">&quot;</span><span class="content">customers</span><span class="delimiter">&quot;</span></span> );</code></pre>
</div>
</div>
<div class="paragraph">
<p>with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">HazelcastInstance hazelcastInstance = Hazelcast.newHazelcastInstance();
<span class="comment">// or if you already started an instance named &quot;instance1&quot;</span>
<span class="comment">// HazelcastInstance hazelcastInstance = Hazelcast.getHazelcastInstanceByName( &quot;instance1&quot; );</span>
<span class="predefined-type">Map</span>&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">String</span>&gt; customers = hazelcastInstance.getMap( <span class="string"><span class="delimiter">&quot;</span><span class="content">customers</span><span class="delimiter">&quot;</span></span> );</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Renaming "instance" to "distributed object":</strong> Before 3.0 there was confusion about the term "instance": it was used for both the cluster members and the distributed objects (map, queue, topic, etc. instances). Starting with Hazelcast 3.0, the term instance will be only used for Hazelcast instances, namely cluster members. We will use the term "distributed object" for map, queue, etc. instances. You should replace the related methods with the new renamed ones. 3.0 clients are smart clients in that they know in which cluster member the data is located, so you can replace your lite members with native clients.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main( <span class="predefined-type">String</span><span class="type">[]</span> args ) <span class="directive">throws</span> <span class="exception">InterruptedException</span> {
  HazelcastInstance hazelcastInstance = Hazelcast.newHazelcastInstance();
  IMap map = hazelcastInstance.getMap( <span class="string"><span class="delimiter">&quot;</span><span class="content">test</span><span class="delimiter">&quot;</span></span> );
  <span class="predefined-type">Collection</span>&lt;Instance&gt; instances = hazelcastInstance.getInstances();
  <span class="keyword">for</span> ( Instance instance : instances ) {
    <span class="keyword">if</span> ( instance.getInstanceType() == Instance.InstanceType.MAP ) {
      <span class="predefined-type">System</span>.out.println( <span class="string"><span class="delimiter">&quot;</span><span class="content">There is a map with name: </span><span class="delimiter">&quot;</span></span> + instance.getId() );
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main( <span class="predefined-type">String</span><span class="type">[]</span> args ) <span class="directive">throws</span> <span class="exception">InterruptedException</span> {
  HazelcastInstance hazelcastInstance = Hazelcast.newHazelcastInstance();
  IMap map = hz.getMap( <span class="string"><span class="delimiter">&quot;</span><span class="content">test</span><span class="delimiter">&quot;</span></span> );
  <span class="predefined-type">Collection</span>&lt;DistributedObject&gt; objects = hazelcastInstance.getDistributedObjects();
  <span class="keyword">for</span> ( DistributedObject distributedObject : objects ) {
    <span class="keyword">if</span> ( distributedObject <span class="keyword">instanceof</span> IMap ) {
      <span class="predefined-type">System</span>.out.println( <span class="string"><span class="delimiter">&quot;</span><span class="content">There is a map with name: </span><span class="delimiter">&quot;</span></span> + distributedObject.getName() );
    }
  }
}</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Package structure change:</strong>
PartitionService has been moved to package <code>com.hazelcast.core</code> from <code>com.hazelcast.partition</code>.</p>
</li>
<li>
<p><strong>Listener API change:</strong> Before 3.0, <code>removeListener</code> methods were taking the Listener object as a parameter. But this caused confusion because same listener object may be used as a parameter for different listener registrations. So we have changed the listener API. <code>addListener</code> methods returns a unique ID and you can remove a listener by using this ID. So you should do the following replacement if needed:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">IMap map = hazelcastInstance.getMap( <span class="string"><span class="delimiter">&quot;</span><span class="content">map</span><span class="delimiter">&quot;</span></span> );
map.addEntryListener( listener, <span class="predefined-constant">true</span> );
map.removeEntryListener( listener );</code></pre>
</div>
</div>
<div class="paragraph">
<p>with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">IMap map = hazelcastInstance.getMap( <span class="string"><span class="delimiter">&quot;</span><span class="content">map</span><span class="delimiter">&quot;</span></span> );
<span class="predefined-type">String</span> listenerId = map.addEntryListener( listener, <span class="predefined-constant">true</span> );
map.removeEntryListener( listenerId );</code></pre>
</div>
</div>
</li>
<li>
<p><strong>IMap changes:</strong></p>
<div class="ulist">
<ul>
<li>
<p><code>tryRemove(K key, long timeout, TimeUnit timeunit)</code> returns boolean indicating whether operation is successful.</p>
</li>
<li>
<p><code>tryLockAndGet(K key, long time, TimeUnit timeunit)</code> is removed.</p>
</li>
<li>
<p><code>putAndUnlock(K key, V value)</code> is removed.</p>
</li>
<li>
<p><code>lockMap(long time, TimeUnit timeunit)</code> and <code>unlockMap()</code> are removed.</p>
</li>
<li>
<p><code>getMapEntry(K key)</code> is renamed as <code>getEntryView(K key)</code>. The returned object&#8217;s type, MapEntry class is renamed as EntryView.</p>
</li>
<li>
<p>There is no predefined names for merge policies. You just give the full class name of the merge policy implementation:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;merge-policy&gt;com.hazelcast.map.merge.PassThroughMergePolicy&lt;/merge-policy&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also MergePolicy interface has been renamed to MapMergePolicy and also returning null from the implemented <code>merge()</code> method causes the existing entry to be removed.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>IQueue changes:</strong> There is no change on IQueue API but there are changes on how <code>IQueue</code> is configured. With Hazelcast 3.0 there will be no backing map configuration for queue. Settings like backup count will be directly configured on queue config. For queue configuration details, please see the <a href="#queue">Queue section</a>.</p>
</li>
<li>
<p><strong>Transaction API change:</strong> In Hazelcast 3.0, transaction API is completely different. Please see the <a href="#transactions">Transactions chapter</a>.</p>
</li>
<li>
<p><strong>ExecutorService API change:</strong> Classes MultiTask and DistributedTask have been removed. All the functionality is supported by the newly presented interface IExecutorService. Please see the <a href="#executor-service">Executor Service section</a>.</p>
</li>
<li>
<p><strong>LifeCycleService API:</strong> The lifecycle has been simplified. <code>pause()</code>, <code>resume()</code>, <code>restart()</code> methods have been removed.</p>
</li>
<li>
<p><strong>AtomicNumber:</strong> <code>AtomicNumber</code> class has been renamed to <code>IAtomicLong</code>.</p>
</li>
<li>
<p><strong>ICountDownLatch:</strong> <code>await()</code> operation has been removed. We expect users to use <code>await()</code> method with timeout parameters.</p>
</li>
<li>
<p><strong>ISemaphore API:</strong> The <code>ISemaphore</code> has been substantially changed. <code>attach()</code>, <code>detach()</code> methods have been removed.</p>
<div class="ulist">
<ul>
<li>
<p>In 2.x releases, the default value for <code>max-size</code> eviction policy was <strong>cluster_wide_map_size</strong>. In 3.x releases, default is <strong>PER_NODE</strong>. After upgrading, the <code>max-size</code> should be set according to this new default, if it is not changed. Otherwise, it is likely that OutOfMemory exception may be thrown.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="starting-the-member-and-client"><a class="anchor" href="#starting-the-member-and-client"></a><a class="link" href="#starting-the-member-and-client">2.5. Starting the Member and Client</a></h3>
<div class="paragraph">
<p>Having installed Hazelcast, you can get started.</p>
</div>
<div class="paragraph">
<p>In this short tutorial, you perform the following activities.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a simple Java application using the Hazelcast distributed map and queue.</p>
</li>
<li>
<p>Run our application twice to have a cluster with two members (JVMs).</p>
</li>
<li>
<p>Connect to our cluster from another Java application by using the Hazelcast Native Java Client API.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Let&#8217;s begin.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The following code starts the first Hazelcast member and creates and uses the <code>customers</code> map and queue.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">GettingStarted</span> {

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        Config cfg = <span class="keyword">new</span> Config();
        HazelcastInstance instance = Hazelcast.newHazelcastInstance(cfg);
        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">String</span>&gt; mapCustomers = instance.getMap(<span class="string"><span class="delimiter">&quot;</span><span class="content">customers</span><span class="delimiter">&quot;</span></span>);
        mapCustomers.put(<span class="integer">1</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Joe</span><span class="delimiter">&quot;</span></span>);
        mapCustomers.put(<span class="integer">2</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Ali</span><span class="delimiter">&quot;</span></span>);
        mapCustomers.put(<span class="integer">3</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Avi</span><span class="delimiter">&quot;</span></span>);

        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Customer with key 1: </span><span class="delimiter">&quot;</span></span>+ mapCustomers.get(<span class="integer">1</span>));
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Map Size:</span><span class="delimiter">&quot;</span></span> + mapCustomers.size());

        <span class="predefined-type">Queue</span>&lt;<span class="predefined-type">String</span>&gt; queueCustomers = instance.getQueue(<span class="string"><span class="delimiter">&quot;</span><span class="content">customers</span><span class="delimiter">&quot;</span></span>);
        queueCustomers.offer(<span class="string"><span class="delimiter">&quot;</span><span class="content">Tom</span><span class="delimiter">&quot;</span></span>);
        queueCustomers.offer(<span class="string"><span class="delimiter">&quot;</span><span class="content">Mary</span><span class="delimiter">&quot;</span></span>);
        queueCustomers.offer(<span class="string"><span class="delimiter">&quot;</span><span class="content">Jane</span><span class="delimiter">&quot;</span></span>);
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">First customer: </span><span class="delimiter">&quot;</span></span> + queueCustomers.poll());
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Second customer: </span><span class="delimiter">&quot;</span></span>+ queueCustomers.peek());
        <span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Queue size: </span><span class="delimiter">&quot;</span></span> + queueCustomers.size());
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Run this <code>GettingStarted</code> class a second time to get the second member
started. The members form a cluster and the output is similar to the following.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Members {size:<span class="integer">2</span>, ver:<span class="integer">2</span>} [
    <span class="predefined-type">Member</span> [<span class="float">127.0</span><span class="float">.0</span><span class="float">.1</span>]:<span class="integer">5701</span> - e40081de-<span class="octal">056</span>a-<span class="integer">4</span>ae5-<span class="float">8f</span>fe-<span class="integer">632</span>caf8a6cf1 <span class="local-variable">this</span>
    <span class="predefined-type">Member</span> [<span class="float">127.0</span><span class="float">.0</span><span class="float">.1</span>]:<span class="integer">5702</span> - <span class="float">93e82109</span>-<span class="integer">16</span>bf-<span class="integer">4</span>b16-<span class="integer">9</span>c87-f4a6d0873080
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, you can see the size of your cluster (<code>size</code>) and member list version (<code>ver</code>). The member list version will be incremented when changes happen to the cluster, e.g., a member leaving from or joining to the cluster.</p>
</div>
<div class="paragraph">
<p>The above member list format is introduced with Hazelcast 3.9. You can enable the legacy member list format,  which was used for the releases before Hazelcast 3.9, using the system property <code>hazelcast.legacy.memberlist.format.enabled</code>. Please see the <a href="#system-properties">System Properties chapter</a>. The following is an example for the legacy member list format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Members [<span class="integer">2</span>] {
    <span class="predefined-type">Member</span> [<span class="float">127.0</span><span class="float">.0</span><span class="float">.1</span>]:<span class="integer">5701</span> - c1ccc8d4-a549-<span class="integer">4</span>bff-bf46-<span class="float">9213e14</span>a9fd2 <span class="local-variable">this</span>
    <span class="predefined-type">Member</span> [<span class="float">127.0</span><span class="float">.0</span><span class="float">.1</span>]:<span class="integer">5702</span> - <span class="integer">33</span>a82dbf-<span class="float">85d</span><span class="integer">6</span>-<span class="integer">4780</span>-b9cf-e47d42fb89d4
}</code></pre>
</div>
</div>
</li>
<li>
<p>Now, add the <code>hazelcast-client-</code><strong><code>&lt;version&gt;</code></strong><code>.jar</code> library to your classpath.
This is required to use a Hazelcast client.</p>
</li>
<li>
<p>The following code starts a Hazelcast Client, connects to our cluster,
and prints the size of the <code>customers</code> map.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">GettingStartedClient</span> {

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main( <span class="predefined-type">String</span><span class="type">[]</span> args ) {
        ClientConfig clientConfig = <span class="keyword">new</span> ClientConfig();
        HazelcastInstance client = HazelcastClient.newHazelcastClient( clientConfig );
        IMap map = client.getMap( <span class="string"><span class="delimiter">&quot;</span><span class="content">customers</span><span class="delimiter">&quot;</span></span> );
        <span class="predefined-type">System</span>.out.println( <span class="string"><span class="delimiter">&quot;</span><span class="content">Map Size:</span><span class="delimiter">&quot;</span></span> + map.size() );
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>When you run it, you see the client properly connecting to the cluster
and printing the map size as <strong>3</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Hazelcast also offers a tool, <strong>Management Center</strong>, that enables you to monitor your cluster.
To use it, deploy the <code>mancenter-&lt;version&gt;.war</code> included in the ZIP file to your web server.
You can use it to monitor your maps, queues, and other distributed data structures and members. Please
see the <a href="http://docs.hazelcast.org/docs/management-center/latest/manual/html/index.html">Hazelcast Management Center Reference Manual</a> for usage explanations.</p>
</div>
<div class="paragraph">
<p>By default, Hazelcast uses multicast to discover other members that can form a cluster.  If you are
working with other Hazelcast developers on the same network, you may find yourself joining their
clusters under the default settings.  Hazelcast provides a way to segregate clusters within the same
network when using multicast. Please see the <a href="#creating-cluster-groups">Creating Cluster Groups</a>
for more information.  Alternatively, if you do not wish to use the default multicast mechanism,
you can provide a fixed list of IP addresses that are allowed to join. Please see
the <a href="#join">Join configuration section</a> for more information.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Multicast mechanism is not recommended for production since UDP is often blocked in production environments and other discovery mechanisms are more definite. Please see the <a href="#discovery-mechanisms">Discovery Mechanisms section</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can also check the video tutorials <a href="https://hazelcast.org/getting-started-with-hazelcast">here</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="using-the-scripts-in-the-package"><a class="anchor" href="#using-the-scripts-in-the-package"></a><a class="link" href="#using-the-scripts-in-the-package">2.6. Using the Scripts In The Package</a></h3>
<div class="paragraph">
<p>When you download and extract the Hazelcast ZIP or TAR.GZ package, you will see three scripts under the <code>/bin</code> folder that provide basic functionalities for member and cluster management.</p>
</div>
<div class="paragraph">
<p>The following are the names and descriptions of each script:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>start.sh</code> / <code>start.bat</code>: Starts a Hazelcast member with default configuration in the working directory*.</p>
</li>
<li>
<p><code>stop.sh</code> / <code>stop.bat</code>: Stops the Hazelcast member that was started in the current working directory.</p>
</li>
<li>
<p><code>cluster.sh</code>: Provides basic functionalities for cluster management, such as getting and changing the cluster state, shutting down the cluster or forcing the cluster to clean its persisted data and make a fresh start. Please refer to the <a href="#using-the-script-cluster-sh">Using the Script cluster.sh section</a> to learn the usage of this script.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>start.sh</code> / <code>start.bat</code> scripts lets you start one Hazelcast instance per folder. To start a new instance, please unzip Hazelcast ZIP or TAR.GZ package in a new folder.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="deploying-on-amazon-ec2"><a class="anchor" href="#deploying-on-amazon-ec2"></a><a class="link" href="#deploying-on-amazon-ec2">2.7. Deploying On Amazon EC2</a></h3>
<div class="paragraph">
<p>You can deploy your Hazelcast project onto an Amazon EC2 environment using Third Party tools such as <a href="https://www.vagrantup.com">Vagrant</a> and <a href="https://www.chef.io/chef/">Chef</a>.</p>
</div>
<div class="paragraph">
<p>You can find a sample deployment project (<code>amazon-ec2-vagrant-chef</code>) with step-by-step instructions in the <code>hazelcast-integration</code> folder of the <strong>hazelcast-code-samples</strong> package, which you can download at <a href="https://hazelcast.org/download/">hazelcast.org</a>. Please refer to this sample project for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="deploying-on-microsoft-azure"><a class="anchor" href="#deploying-on-microsoft-azure"></a><a class="link" href="#deploying-on-microsoft-azure">2.8. Deploying On Microsoft Azure</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/Plugin_New.png" alt="Azure Plugin" width="84" height="22">
</div>
</div>
<div class="paragraph">
<p>You can deploy your Hazelcast cluster onto a Microsoft Azure environment. For this, your cluster should make use of Hazelcast Discovery Plugin for Microsoft Azure. You can find information about this plugin on its GitHub repository at <a href="https://github.com/hazelcast/hazelcast-azure">Hazelcast Azure</a>.</p>
</div>
<div class="paragraph">
<p>For information on how to automatically deploy your cluster onto Azure, please see the <a href="https://github.com/hazelcast/hazelcast-azure/blob/master/README.md#automated-deployment">Deployment</a> section of <a href="https://github.com/hazelcast/hazelcast-azure">Hazelcast Azure</a> plugin repository.</p>
</div>
</div>
<div class="sect2">
<h3 id="deploying-on-pivotal-cloud-foundry"><a class="anchor" href="#deploying-on-pivotal-cloud-foundry"></a><a class="link" href="#deploying-on-pivotal-cloud-foundry">2.9. Deploying On Pivotal Cloud Foundry</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/Plugin_New.png" alt="CloudFoundry" width="84" height="22">
</div>
</div>
<div class="paragraph">
<p>Starting with Hazelcast 3.7, you can deploy your Hazelcast cluster onto Pivotal Cloud Foundry. It is available as a Pivotal Cloud Foundry Tile which you can download at <a href="https://network.pivotal.io/products/hazelcast/">here</a>. You can find the installation and usage instructions, and the release notes documents at <a href="https://docs.pivotal.io/partners/hazelcast/index.html">https://docs.pivotal.io/partners/hazelcast/index.html</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="deploying-using-docker"><a class="anchor" href="#deploying-using-docker"></a><a class="link" href="#deploying-using-docker">2.10. Deploying using Docker</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/Plugin_New.png" alt="Docker Plugin" width="84" height="22">
</div>
</div>
<div class="paragraph">
<p>You can deploy your Hazelcast projects using the Docker containers. Hazelcast has the following images on Docker:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hazelcast IMDG</p>
</li>
<li>
<p>Hazelcast IMDG Enterprise</p>
</li>
<li>
<p>Hazelcast Management Center</p>
</li>
<li>
<p>Hazelcast OpenShift</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After you pull an image from the Docker registry, you can run your image to start the management center or a Hazelcast instance with Hazelcast&#8217;s default configuration. All repositories provide the latest stable releases but you can pull a specific release too. You can also specify environment variables when running the image.</p>
</div>
<div class="paragraph">
<p>If you want to start a customized Hazelcast instance, you can extend the Hazelcast image by providing your own configuration file.</p>
</div>
<div class="paragraph">
<p>This feature is provided as a Hazelcast plugin. Please see its own GitHub repo at <a href="https://github.com/hazelcast/hazelcast-docker">Hazelcast Docker</a> for details on configurations and usages.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hazelcast-overview"><a class="anchor" href="#hazelcast-overview"></a><a class="link" href="#hazelcast-overview">3. Hazelcast Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hazelcast is an open source In-Memory Data Grid (IMDG).
It provides elastically scalable distributed In-Memory computing, widely recognized as the fastest and most scalable
approach to application performance. Hazelcast does this in open source.
More importantly, Hazelcast makes distributed computing simple by offering distributed implementations of many
developer-friendly interfaces from Java such as Map, Queue, ExecutorService, Lock, and JCache. For example, the Map
interface provides an In-Memory Key Value store which confers many of the advantages of NoSQL in terms of developer
friendliness and developer productivity.</p>
</div>
<div class="paragraph">
<p>In addition to distributing data In-Memory, Hazelcast provides a convenient set of APIs to access the CPUs in your
cluster for maximum processing speed.
Hazelcast is designed to be lightweight and easy to use. Since Hazelcast is delivered as a compact library (JAR) and
since it has no external dependencies other than Java, it easily plugs into your software solution and provides
distributed data structures and distributed computing utilities.</p>
</div>
<div class="paragraph">
<p>Hazelcast is highly scalable and available. Distributed applications can use
Hazelcast for distributed caching, synchronization, clustering, processing, pub/sub messaging, etc. Hazelcast is
implemented in Java and has clients for Java, C/C++, .NET, REST, Python, Go and Node.js. Hazelcast also speaks Memcached protocol. It plugs into Hibernate and can easily be used with any existing database system.</p>
</div>
<div class="paragraph">
<p>If you are looking for In-Memory speed, elastic scalability, and the developer friendliness of NoSQL, Hazelcast is a
great choice.</p>
</div>
<div class="paragraph">
<p><strong>Hazelcast is Simple</strong></p>
</div>
<div class="paragraph">
<p>Hazelcast is written in Java with no other dependencies. It exposes the same API from the familiar Java util package,
exposing the same interfaces. Just add <code>hazelcast.jar</code> to your classpath and you can quickly enjoy JVMs clustering
and start building scalable applications.</p>
</div>
<div class="paragraph">
<p><strong>Hazelcast is Peer-to-Peer</strong></p>
</div>
<div class="paragraph">
<p>Unlike many NoSQL solutions, Hazelcast is peer-to-peer. There is no master and slave; there is no single point of
failure. All members store equal amounts of data and do equal amounts of processing. You can embed Hazelcast in your
existing application or use it in client and server mode where your application is a client to Hazelcast members.</p>
</div>
<div class="paragraph">
<p><strong>Hazelcast is Scalable</strong></p>
</div>
<div class="paragraph">
<p>Hazelcast is designed to scale up to hundreds and thousands of members. Simply add new members and they will
automatically discover the cluster and will linearly increase both memory and processing capacity. The members maintain
a TCP connection between each other and all communication is performed through this layer.</p>
</div>
<div class="paragraph">
<p><strong>Hazelcast is Fast</strong></p>
</div>
<div class="paragraph">
<p>Hazelcast stores everything in-memory. It is designed to perform very fast reads and updates.</p>
</div>
<div class="paragraph">
<p><strong>Hazelcast is Redundant</strong></p>
</div>
<div class="paragraph">
<p>Hazelcast keeps the backup of each data entry on multiple members. On a member failure, the data is restored from the
backup and the cluster will continue to operate without downtime.</p>
</div>
<div class="sect2">
<h3 id="sharding-in-hazelcast"><a class="anchor" href="#sharding-in-hazelcast"></a><a class="link" href="#sharding-in-hazelcast">3.1. Sharding in Hazelcast</a></h3>
<div class="paragraph">
<p>Hazelcast shards are called Partitions. By default, Hazelcast has 271 partitions. Given a key, we serialize, hash
and mod it with the number of partitions to find the partition which the key belongs to. The partitions themselves are
distributed equally among the members of the cluster. Hazelcast also creates the backups of partitions and distributes
them among members for redundancy.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please refer to the <a href="#data-partitioning">Data Partitioning section</a> for more information on how Hazelcast partitions
your data.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hazelcat-topology"><a class="anchor" href="#hazelcat-topology"></a><a class="link" href="#hazelcat-topology">3.2. Hazelcast Topology</a></h3>
<div class="paragraph">
<p>You can deploy a Hazelcast cluster in two ways: Embedded or Client/Server.</p>
</div>
<div class="paragraph">
<p>If you have an application whose main focal point is asynchronous or high performance computing and lots of task
executions, then Embedded deployment is the preferred way. In Embedded deployment, members include both the application and Hazelcast data and services. The advantage of the Embedded deployment is having a low-latency data access.</p>
</div>
<div class="paragraph">
<p>See the below illustration.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Embedded.png" alt="Embedded Deployment">
</div>
</div>
<div class="paragraph">
<p>In the Client/Server deployment, Hazelcast data and services are centralized in one or more server members and they are accessed by the application through clients.
You can have a cluster of server members that can be independently created and scaled. Your clients communicate with
these members to reach to Hazelcast data and services on them.</p>
</div>
<div class="paragraph">
<p>See the below illustration.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ClientServer.png" alt="Client/Server Deployment">
</div>
</div>
<div class="paragraph">
<p>Hazelcast provides native clients (Java, .NET and C++), Memcache and REST clients, Scala, Python and Node.js client implementations.</p>
</div>
<div class="paragraph">
<p>Client/Server deployment has advantages including more predictable and reliable Hazelcast performance, easier identification of problem causes, and most importantly, better scalability.
When you need to scale in this deployment type, just add more Hazelcast server members. You can address client and server scalability concerns separately.</p>
</div>
<div class="paragraph">
<p>If you want low-latency data access, as in the Embedded deployment, and you also want the scalability advantages of the Client/Server deployment, you can consider defining Near Caches for your clients. This enables the frequently used data to be kept in the client&#8217;s local memory. Please refer to the <a href="#configuring-client-near-cache">Configuring Client Near Cache section</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="why-hazelcast"><a class="anchor" href="#why-hazelcast"></a><a class="link" href="#why-hazelcast">3.3. Why Hazelcast?</a></h3>
<div class="paragraph">
<p><strong>A Glance at Traditional Data Persistence</strong></p>
</div>
<div class="paragraph">
<p>Data is at the core of software systems. In conventional architectures, a relational database persists and provides access to data. Applications are talking directly with a database which has its backup as another machine. To increase performance, tuning or a faster machine is required. This can cost a large amount of money or effort.</p>
</div>
<div class="paragraph">
<p>There is also the idea of keeping copies of data next to the database, which is performed using technologies like external key-value stores or second level caching that help offload the database. However, when the database is saturated or the applications perform mostly "put" operations (writes), this approach is of no use because it insulates the database only from the "get" loads (reads). Even if the applications are read-intensive there can be consistency problems - when data changes, what happens to the cache, and how are the changes handled? This is when concepts like time-to-live (TTL) or write-through come in.</p>
</div>
<div class="paragraph">
<p>In the case of TTL, if the access is less frequent than the TTL, the result will always be a cache miss. On the other hand, in the case of write-through caches, if there are more than one of these caches in a cluster, we again will have consistency issues. This can be avoided by having the nodes communicate with each other so that entry invalidations can be propagated.</p>
</div>
<div class="paragraph">
<p>We can conclude that an ideal cache would combine TTL and write-through features. There are several cache servers and in-memory database solutions in this field. However, these are stand-alone single instances with a distribution mechanism that is provided by other technologies to an extent. So, we are back to square one; we experience saturation or capacity issues if the product is a single instance or if consistency is not provided by the distribution.</p>
</div>
<div class="paragraph">
<p><strong>And, there is Hazelcast</strong></p>
</div>
<div class="paragraph">
<p>Hazelcast, a brand new approach to data, is designed around the concept of distribution. Hazelcast shares data around the cluster for flexibility and performance. It is an in-memory data grid for clustering and highly scalable data distribution.</p>
</div>
<div class="paragraph">
<p>One of the main features of Hazelcast is that it does not have a master member. Each cluster member is configured to be the same in terms of functionality. The oldest member (the first member created in the cluster) automatically performs the data assignment to cluster members. If the oldest member dies, the second oldest member takes over.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can come across with the term "master" or "master member" in some sections of this manual. They are used for contextual clarification purposes; please remember that they refer to the "oldest member" which is explained in the above paragraph.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Another main feature of Hazelcast is that the data is held entirely in-memory. This is fast. In the case of a failure, such as a member crash, no data will be lost since Hazelcast distributes copies of the data across all the cluster members.</p>
</div>
<div class="paragraph">
<p>As shown in the feature list in the <a href="#distributed-data-structures">Distributed Data Structures chapter</a>, Hazelcast supports a number of distributed data structures and distributed computing utilities. These provide powerful ways of accessing distributed clustered memory and accessing CPUs for true distributed computing.</p>
</div>
<div class="paragraph">
<p><strong>Hazelcast&#8217;s Distinctive Strengths</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hazelcast is open source.</p>
</li>
<li>
<p>Hazelcast is only a JAR file. You do not need to install software.</p>
</li>
<li>
<p>Hazelcast is a library, it does not impose an architecture on Hazelcast users.</p>
</li>
<li>
<p>Hazelcast provides out-of-the-box distributed data structures, such as Map, Queue, MultiMap, Topic, Lock and Executor.</p>
</li>
<li>
<p>There is no "master," meaning no single point of failure in a Hazelcast cluster; each member in the cluster is configured to be functionally the same.</p>
</li>
<li>
<p>When the size of your memory and compute requirements increase, new members can be dynamically joined to the Hazelcast cluster to scale elastically.</p>
</li>
<li>
<p>Data is resilient to member failure. Data backups are distributed across the cluster. This is a big benefit when a member in the cluster crashes as data will not be lost.</p>
</li>
<li>
<p>Members are always aware of each other unlike in traditional key-value caching solutions.</p>
</li>
<li>
<p>You can build your own custom-distributed data structures using the Service Programming Interface (SPI) if you are not happy with the data structures provided.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally, Hazelcast has a vibrant open source community enabling it to be continuously developed.</p>
</div>
<div class="paragraph">
<p>Hazelcast is a fit when you need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>analytic applications requiring big data processing by partitioning the data.</p>
</li>
<li>
<p>to retain frequently accessed data in the grid.</p>
</li>
<li>
<p>a cache, particularly an open source JCache provider with elastic distributed scalability.</p>
</li>
<li>
<p>a primary data store for applications with utmost performance, scalability and low-latency requirements.</p>
</li>
<li>
<p>an In-Memory NoSQL Key Value Store.</p>
</li>
<li>
<p>publish/subscribe communication at highest speed and scalability between applications.</p>
</li>
<li>
<p>applications that need to scale elastically in distributed and cloud environments.</p>
</li>
<li>
<p>a highly available distributed cache for applications.</p>
</li>
<li>
<p>an alternative to Coherence and Terracotta.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="data-partitioning"><a class="anchor" href="#data-partitioning"></a><a class="link" href="#data-partitioning">3.4. Data Partitioning</a></h3>
<div class="paragraph">
<p>As you read in the <a href="#sharding-in-hazelcast">Sharding in Hazelcast section</a>, Hazelcast shards are called Partitions. Partitions are memory segments that can contain hundreds or thousands of data entries each, depending on the memory capacity of your system. Each Hazelcast partition can have multiple replicas, which are distributed among the cluster members. One of the replicas becomes the <code>primary</code> and other replicas are called <code>backups</code>. Cluster member which owns <code>primary</code> replica of a partition is called <code>partition owner</code>. When you read or write a particular data entry, you transparently talk to the owner of the partition that contains the data entry.</p>
</div>
<div class="paragraph">
<p>By default, Hazelcast offers 271 partitions. When you start a cluster with a single member, it owns all of 271 partitions (i.e., it keeps primary replicas for 271 partitions). The following illustration shows the partitions in a Hazelcast cluster with single member.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/NodePartition.jpg" alt="Single Member with Partitions">
</div>
</div>
<div class="paragraph">
<p>When you start a second member on that cluster (creating a Hazelcast cluster with two members), the partition replicas are distributed as shown in the illustration here.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Partition distributions in the below illustrations are shown for the sake of simplicity and for descriptive purposes. Normally, the partitions are not distributed in any order, as they are shown in these illustrations, but are distributed randomly (they do not have to be sequentially distributed to each member). The important point here is that Hazelcast equally distributes the partition primaries and their backup replicas among the members.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/BackupPartitions.jpg" alt="Cluster with Two Members - Backups are Created">
</div>
</div>
<div class="paragraph">
<p>In the illustration, the partition replicas with black text are primaries and the partition replicas with blue text are backups. The first member has primary replicas of 135 partitions (black), and each of these partitions are backed up in the second member (i.e., the second member owns the backup replicas) (blue). At the same time, the first member also has the backup replicas of the second member&#8217;s primary partition replicas.</p>
</div>
<div class="paragraph">
<p>As you add more members, Hazelcast moves some of the primary and backup partition replicas to the new members one by one, making all members equal and redundant. Thanks to the consistent hashing algorithm, only the minimum amount of partitions will be moved to scale out Hazelcast. The following is an illustration of the partition replica distributions in a Hazelcast cluster with four members.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/4NodeCluster.jpg" alt="Cluster with Four Members">
</div>
</div>
<div class="paragraph">
<p>Hazelcast distributes partitions' primary and backup replicas equally among the members of the cluster. Backup replicas of the partitions are maintained for redundancy.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Your data can have multiple copies on partition primaries and backups, depending on your backup count. Please see the <a href="#backing-up-maps">Backing Up Maps section</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Starting with Hazelcast 3.6, lite members are introduced. Lite members are a new type of members that do not own any partition. Lite members are intended for use in computationally-heavy task executions and listener registrations. Although they do not own any partitions,
they can access partitions that are owned by other members in the cluster.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please refer to the <a href="#enabling-lite-members">Enabling Lite Members section</a>.
&lt;br&gt;&lt;/br&gt;
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="how-the-data-is-partitioned"><a class="anchor" href="#how-the-data-is-partitioned"></a><a class="link" href="#how-the-data-is-partitioned">3.4.1. How the Data is Partitioned</a></h4>
<div class="paragraph">
<p>Hazelcast distributes data entries into the partitions using a hashing algorithm. Given an object key (for example, for a map) or an object name (for example, for a topic or list):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the key or name is serialized (converted into a byte array),</p>
</li>
<li>
<p>this byte array is hashed, and</p>
</li>
<li>
<p>the result of the hash is mod by the number of partitions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The result of this modulo - <strong>MOD(hash result, partition count)</strong> -  is the partition in which the data will be stored, that is the <strong>partition ID</strong>. For ALL members you have in your cluster, the partition ID for a given key will always be the same.</p>
</div>
</div>
<div class="sect3">
<h4 id="partition-table"><a class="anchor" href="#partition-table"></a><a class="link" href="#partition-table">3.4.2. Partition Table</a></h4>
<div class="paragraph">
<p>When you start a member, a partition table is created within it. This table stores the partition IDs and the cluster members to which they belong. The purpose of this table is to make all members (including lite members) in the cluster aware of this information, making sure that each member knows where the data is.</p>
</div>
<div class="paragraph">
<p>The oldest member in the cluster (the one that started first) periodically sends the partition table to all members. In this way each member in the cluster is informed about any changes to partition ownership. The ownerships may be changed when, for example, a new member joins the cluster, or when a member leaves the cluster.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the oldest member of the cluster goes down, the next oldest member sends the partition table information to the other ones.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can configure the frequency (how often) that the member sends the partition table the information by using the <code>hazelcast.partition.table.send.interval</code> system property. The property is set to every 15 seconds by default.</p>
</div>
</div>
<div class="sect3">
<h4 id="repartitioning"><a class="anchor" href="#repartitioning"></a><a class="link" href="#repartitioning">3.4.3. Repartitioning</a></h4>
<div class="paragraph">
<p>Repartitioning is the process of redistribution of partition ownerships. Hazelcast performs the repartitioning in the following cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When a member joins to the cluster.</p>
</li>
<li>
<p>When a member leaves the cluster.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In these cases, the partition table in the oldest member is updated with the new partition ownerships. Note that if a lite member joins or leaves a cluster, repartitioning is not triggered since lite members do not own any partitions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="use-cases"><a class="anchor" href="#use-cases"></a><a class="link" href="#use-cases">3.5. Use Cases</a></h3>
<div class="paragraph">
<p>Hazelcast can be used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to share server configuration/information to see how a cluster performs.</p>
</li>
<li>
<p>to cluster highly changing data with event notifications, e.g., user based events, and to queue and distribute background tasks.</p>
</li>
<li>
<p>as a simple Memcache with Near Cache.</p>
</li>
<li>
<p>as a cloud-wide scheduler of certain processes that need to be performed on some members.</p>
</li>
<li>
<p>to share information (user information, queues, maps, etc.) on the fly with multiple members in different installations under OSGI environments.</p>
</li>
<li>
<p>to share thousands of keys in a cluster where there is a web service interface on an application server and some validation.</p>
</li>
<li>
<p>as a distributed topic (publish/subscribe server) to build scalable chat servers for smartphones.</p>
</li>
<li>
<p>as a front layer for a Cassandra back-end.</p>
</li>
<li>
<p>to distribute user object states across the cluster, to pass messages between objects, and to share system data structures (static initialization state, mirrored objects, object identity generators).</p>
</li>
<li>
<p>as a multi-tenancy cache where each tenant has its own map.</p>
</li>
<li>
<p>to share datasets, e.g., table-like data structure, to be used by applications.</p>
</li>
<li>
<p>to distribute the load and collect status from Amazon EC2 servers where the front-end is developed using, for example, Spring framework.</p>
</li>
<li>
<p>as a real-time streamer for performance detection.</p>
</li>
<li>
<p>as storage for session data in web applications (enables horizontal scalability of the web application).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="resources"><a class="anchor" href="#resources"></a><a class="link" href="#resources">3.6. Resources</a></h3>
<div class="ulist">
<ul>
<li>
<p>Hazelcast source code can be found at <a href="https://github.com/hazelcast/hazelcast">Github/Hazelcast</a>.</p>
</li>
<li>
<p>Hazelcast API can be found at <a href="https://www.hazelcast.org/docs/latest-dev/javadoc/">Hazelcast.org/docs/Javadoc</a>.</p>
</li>
<li>
<p>Code samples can be downloaded from <a href="https://hazelcast.org/download/">Hazelcast.org/download</a>.</p>
</li>
<li>
<p>More use cases and resources can be found at <a href="http://www.hazelcast.com">Hazelcast.com</a>.</p>
</li>
<li>
<p>Questions and discussions can be posted at the <a href="https://groups.google.com/forum/#!forum/hazelcast">Hazelcast mail group</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="understanding-configuration"><a class="anchor" href="#understanding-configuration"></a><a class="link" href="#understanding-configuration">4. Understanding Configuration</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the options to configure your Hazelcast applications and explains the utilities which you can make use of while configuring. You can configure Hazelcast using one or mix of the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Declarative way</p>
</li>
<li>
<p>Programmatic way</p>
</li>
<li>
<p>Using Hazelcast system properties</p>
</li>
<li>
<p>Within the Spring context</p>
</li>
<li>
<p>Dynamically adding configuration on a running cluster (starting with Hazelcast 3.9)</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="configuring-declaratively"><a class="anchor" href="#configuring-declaratively"></a><a class="link" href="#configuring-declaratively">4.1. Configuring Declaratively</a></h3>
<div class="paragraph">
<p>This is the configuration option where you use an XML configuration file. When you download and unzip <code>hazelcast-&lt;version&gt;.zip</code>, you will see the following files present in <code>/bin</code> folder, which are standard XML-formatted configuration files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hazelcast.xml</code>: Default declarative configuration file for Hazelcast. The configuration in this XML file should be fine for most of the Hazelcast users. If not, you can tailor this XML file according to your needs by adding/removing/modifying properties.</p>
</li>
<li>
<p><code>hazelcast-full-example.xml</code>: Configuration file which includes all Hazelcast configuration elements and attributes with their descriptions. It is the "superset" of <code>hazelcast.xml</code>. You can use <code>hazelcast-full-example.xml</code> as a reference document to learn about any element or attribute, or you can change its name to <code>hazelcast.xml</code> and start to use it as your Hazelcast configuration file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A part of <code>hazelcast.xml</code> is shown as an example below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;group&gt;</span>
        <span class="tag">&lt;name&gt;</span>dev<span class="tag">&lt;/name&gt;</span>
<span class="tag">&lt;/group&gt;</span>
<span class="tag">&lt;management-center</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://localhost:8080/mancenter<span class="tag">&lt;/management-center&gt;</span>
<span class="tag">&lt;network&gt;</span>
        <span class="tag">&lt;port</span> <span class="attribute-name">auto-increment</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">port-count</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">100</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>5701<span class="tag">&lt;/port&gt;</span>
        <span class="tag">&lt;outbound-ports&gt;</span>
                <span class="comment">&lt;!--
                Allowed port range when connecting to other members.
                0 or * means the port provided by the system.
                --&gt;</span>
                <span class="tag">&lt;ports&gt;</span>0<span class="tag">&lt;/ports&gt;</span>
        <span class="tag">&lt;/outbound-ports&gt;</span>
        <span class="tag">&lt;join&gt;</span>
                <span class="tag">&lt;multicast</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;multicast-group&gt;</span>224.2.2.3<span class="tag">&lt;/multicast-group&gt;</span>
                <span class="tag">&lt;multicast-port&gt;</span>54327<span class="tag">&lt;/multicast-port&gt;</span>
                <span class="tag">&lt;/multicast&gt;</span>
                <span class="tag">&lt;tcp-ip</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                        <span class="tag">&lt;interface&gt;</span>127.0.0.1<span class="tag">&lt;/interface&gt;</span>
                                <span class="tag">&lt;member-list&gt;</span>
                                        <span class="tag">&lt;member&gt;</span>127.0.0.1<span class="tag">&lt;/member&gt;</span>
                                <span class="tag">&lt;/member-list&gt;</span>
                <span class="tag">&lt;/tcp-ip&gt;</span>
        <span class="tag">&lt;/join&gt;</span>
<span class="tag">&lt;/network&gt;</span>
<span class="tag">&lt;map</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">default</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;time-to-live-seconds&gt;</span>0<span class="tag">&lt;/time-to-live-seconds&gt;</span>
<span class="tag">&lt;/map&gt;</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="composing-declarative-configuration"><a class="anchor" href="#composing-declarative-configuration"></a><a class="link" href="#composing-declarative-configuration">4.1.1. Composing Declarative Configuration</a></h4>
<div class="paragraph">
<p>You can compose the declarative configuration of your Hazelcast member or Hazelcast client from multiple declarative configuration snippets. In order to compose a declarative configuration, you can use the <code>&lt;import/&gt;</code> element to load different declarative configuration files.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say you want to compose the declarative configuration for Hazelcast out of two configurations: <code>development-group-config.xml</code> and <code>development-network-config.xml</code>. These two configurations are shown below.</p>
</div>
<div class="paragraph">
<p><code>development-group-config.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
  <span class="tag">&lt;group&gt;</span>
      <span class="tag">&lt;name&gt;</span>dev<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;/group&gt;</span>
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>development-network-config.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
  <span class="tag">&lt;network&gt;</span>
    <span class="tag">&lt;port</span> <span class="attribute-name">auto-increment</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">port-count</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">100</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>5701<span class="tag">&lt;/port&gt;</span>
    <span class="tag">&lt;join&gt;</span>
        <span class="tag">&lt;multicast</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;multicast-group&gt;</span>224.2.2.3<span class="tag">&lt;/multicast-group&gt;</span>
            <span class="tag">&lt;multicast-port&gt;</span>54327<span class="tag">&lt;/multicast-port&gt;</span>
        <span class="tag">&lt;/multicast&gt;</span>
    <span class="tag">&lt;/join&gt;</span>
  <span class="tag">&lt;/network&gt;</span>
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To get your example Hazelcast declarative configuration out of the above two, use the <code>&lt;import/&gt;</code> element as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
  <span class="tag">&lt;import</span> <span class="attribute-name">resource</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">development-group-config.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;import</span> <span class="attribute-name">resource</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">development-network-config.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This feature also applies to the declarative configuration of Hazelcast client. Please see the following examples.</p>
</div>
<div class="paragraph">
<p><code>client-group-config.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast-client&gt;</span>
  <span class="tag">&lt;group&gt;</span>
      <span class="tag">&lt;name&gt;</span>dev<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;/group&gt;</span>
<span class="tag">&lt;/hazelcast-client&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>client-network-config.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast-client&gt;</span>
    <span class="tag">&lt;network&gt;</span>
        <span class="tag">&lt;cluster-members&gt;</span>
            <span class="tag">&lt;address&gt;</span>127.0.0.1:7000<span class="tag">&lt;/address&gt;</span>
        <span class="tag">&lt;/cluster-members&gt;</span>
    <span class="tag">&lt;/network&gt;</span>
<span class="tag">&lt;/hazelcast-client&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To get a Hazelcast client declarative configuration from the above two examples, use the <code>&lt;import/&gt;</code> element as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast-client&gt;</span>
  <span class="tag">&lt;import</span> <span class="attribute-name">resource</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">client-group-config.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;import</span> <span class="attribute-name">resource</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">client-network-config.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use <code>&lt;import/&gt;</code> element on top level of the XML hierarchy.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Using the element <code>&lt;import&gt;</code>, you can also load XML resources from classpath and file system:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
  <span class="tag">&lt;import</span> <span class="attribute-name">resource</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">file:///etc/hazelcast/development-group-config.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <span class="comment">&lt;!-- loaded from filesystem --&gt;</span>
  <span class="tag">&lt;import</span> <span class="attribute-name">resource</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">classpath:development-network-config.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>  <span class="comment">&lt;!-- loaded from classpath --&gt;</span>
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The element <code>&lt;import&gt;</code> supports variables too. Please see the following example snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
  <span class="tag">&lt;import</span> <span class="attribute-name">resource</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${environment}-group-config.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;import</span> <span class="attribute-name">resource</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${environment}-network-config.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can refer to the <a href="#using-variables">Using Variables section</a> to learn how you can set the configuration elements with variables.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuring-programmatically"><a class="anchor" href="#configuring-programmatically"></a><a class="link" href="#configuring-programmatically">4.2. Configuring Programmatically</a></h3>
<div class="paragraph">
<p>Besides declarative configuration, you can configure your cluster programmatically. For this you can create a <code>Config</code> object, set/change its properties and attributes, and use this <code>Config</code> object to create a new Hazelcast member. Following is an example code which configures some network and Hazelcast Map properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config();
config.getNetworkConfig().setPort( <span class="integer">5900</span> )
                                        .setPortAutoIncrement( <span class="predefined-constant">false</span> );

MapConfig mapConfig = <span class="keyword">new</span> MapConfig();
mapConfig.setName( <span class="string"><span class="delimiter">&quot;</span><span class="content">testMap</span><span class="delimiter">&quot;</span></span> )
                                        .setBackupCount( <span class="integer">2</span> )
                                        .setTimeToLiveSeconds( <span class="integer">300</span> );

config.addMapConfig( mapConfig );</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create a Hazelcast member with the above example configuration, pass the configuration object as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">HazelcastInstance hazelcast = Hazelcast.newHazelcastInstance( config );</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>Config</code> must not be modified after the Hazelcast instance is started. In other words, all configuration must be completed before creating the <code>HazelcastInstance</code>. Certain additional configuration elements can be added at runtime as described in the <a href="#dynamically-adding-data-structure-configuration-on-a-cluster">Dynamically Adding Data Structure Configuration on a Cluster section</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also create a named Hazelcast member. In this case, you should set <code>instanceName</code> of <code>Config</code> object as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config();
config.setInstanceName( <span class="string"><span class="delimiter">&quot;</span><span class="content">my-instance</span><span class="delimiter">&quot;</span></span> );
Hazelcast.newHazelcastInstance( config );</code></pre>
</div>
</div>
<div class="paragraph">
<p>To retrieve an existing Hazelcast member by its name, use the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Hazelcast.getHazelcastInstanceByName( <span class="string"><span class="delimiter">&quot;</span><span class="content">my-instance</span><span class="delimiter">&quot;</span></span> );</code></pre>
</div>
</div>
<div class="paragraph">
<p>To retrieve all existing Hazelcast members, use the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Hazelcast.getAllHazelcastInstances();</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Hazelcast performs schema validation through the file <code>hazelcast-config-&lt;version&gt;.xsd</code> which comes with your Hazelcast libraries. Hazelcast throws a meaningful exception if there is an error in the declarative or programmatic configuration.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you want to specify your own configuration file to create <code>Config</code>, Hazelcast supports several ways including filesystem, classpath, InputStream, and URL:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Config cfg = new XmlConfigBuilder(xmlFileName).build();</code></p>
</li>
<li>
<p><code>Config cfg = new XmlConfigBuilder(inputStream).build();</code></p>
</li>
<li>
<p><code>Config cfg = new ClasspathXmlConfig(xmlFileName);</code></p>
</li>
<li>
<p><code>Config cfg = new FileSystemXmlConfig(configFilename);</code></p>
</li>
<li>
<p><code>Config cfg = new UrlXmlConfig(url);</code></p>
</li>
<li>
<p><code>Config cfg = new InMemoryXmlConfig(xml);</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuring-with-system-properties"><a class="anchor" href="#configuring-with-system-properties"></a><a class="link" href="#configuring-with-system-properties">4.3. Configuring with System Properties</a></h3>
<div class="paragraph">
<p>You can use system properties to configure some aspects of Hazelcast. You set these properties as name and value pairs through declarative configuration, programmatic configuration or JVM system property. Following are examples for each option.</p>
</div>
<div class="paragraph">
<p><strong>Declaratively:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">  ....
  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.property.foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>value<span class="tag">&lt;/property&gt;</span>
    ....
  <span class="tag">&lt;/properties&gt;</span>
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatically:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config() ;
config.setProperty( <span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.property.foo</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> );</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Using JVM&#8217;s <code>System</code> class or <code>-D</code> argument:</strong></p>
</div>
<div class="paragraph">
<p><code>System.setProperty( "hazelcast.property.foo", "value" );</code></p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p><code>java -Dhazelcast.property.foo=value</code></p>
</div>
<div class="paragraph">
<p>You will see Hazelcast system properties mentioned throughout this Reference Manual as required in some of the chapters and sections. All Hazelcast system properties are listed in the <a href="#system-properties">System Properties appendix</a> with their descriptions, default values and property types as a reference for you.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuring-within-spring-context"><a class="anchor" href="#configuring-within-spring-context"></a><a class="link" href="#configuring-within-spring-context">4.4. Configuring within Spring Context</a></h3>
<div class="paragraph">
<p>If you use Hazelcast with <a href="https://spring.io/">Spring</a> you can declare beans using the namespace <code>hazelcast</code>. When you add the namespace declaration to the element <code>beans</code> in the Spring context file, you can start to use the namespace shortcut <code>hz</code> to be used as a bean declaration. Following is an example Hazelcast configuration when integrated with Spring:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;hz:hazelcast id=<span class="string"><span class="delimiter">&quot;</span><span class="content">instance</span><span class="delimiter">&quot;</span></span>&gt;
  &lt;hz:config&gt;
    &lt;hz:group name=<span class="string"><span class="delimiter">&quot;</span><span class="content">dev</span><span class="delimiter">&quot;</span></span>/&gt;
    &lt;hz:network port=<span class="string"><span class="delimiter">&quot;</span><span class="content">5701</span><span class="delimiter">&quot;</span></span> port-auto-increment=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>&gt;
      &lt;hz:join&gt;
        &lt;hz:multicast enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>/&gt;
        &lt;hz:tcp-ip enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>&gt;
          &lt;hz:members&gt;<span class="float">10.10</span><span class="float">.1</span><span class="float">.2</span>, <span class="float">10.10</span><span class="float">.1</span><span class="float">.3</span>&lt;/hz:members&gt;
        &lt;/hz:tcp-ip&gt;
      &lt;/hz:join&gt;
    &lt;/hz:network&gt;
  &lt;/hz:config&gt;
&lt;/hz:hazelcast&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please see the <a href="#integrating-with-spring">Spring Integration section</a> for more information on Hazelcast-Spring integration.</p>
</div>
</div>
<div class="sect2">
<h3 id="dynamically-adding-data-structure-configuration-on-a-cluster"><a class="anchor" href="#dynamically-adding-data-structure-configuration-on-a-cluster"></a><a class="link" href="#dynamically-adding-data-structure-configuration-on-a-cluster">4.5. Dynamically Adding Data Structure Configuration on a Cluster</a></h3>
<div class="paragraph">
<p>As described above, Hazelcast can be configured in a declarative or programmatic way; configuration must be completed before starting a Hazelcast member and this configuration cannot be altered at runtime, thus we refer to this as <em>static</em> configuration.</p>
</div>
<div class="paragraph">
<p>Starting with Hazelcast 3.9, it is possible to dynamically add configuration for certain data structures at runtime; these can be added by invoking one of the <code>Config.add*Config</code> methods on the <code>Config</code> object obtained from a running member&#8217;s <code>HazelcastInstance.getConfig()</code> method. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config();
MapConfig mapConfig = <span class="keyword">new</span> MapConfig(<span class="string"><span class="delimiter">&quot;</span><span class="content">sessions</span><span class="delimiter">&quot;</span></span>);
config.addMapConfig(mapConfig);

HazelcastInstance instance = Hazelcast.newHazelcastInstance(config);

<span class="comment">// need to configure another map with no sync backups</span>
MapConfig noBackupsMap = <span class="keyword">new</span> MapConfig(<span class="string"><span class="delimiter">&quot;</span><span class="content">dont-backup</span><span class="delimiter">&quot;</span></span>).setBackupCount(<span class="integer">0</span>);

<span class="comment">// DO NOT DO THIS -- never modify the original Config object</span>
<span class="comment">// config.addMapConfig(noBackupsMap);</span>

<span class="comment">// Instead do this. The added config will be propagated to all members of the cluster</span>
instance.getConfig().addMapConfig(noBackupsMap);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dynamic configuration elements must be fully configured before the invocation of <code>add*Config</code> method: at that point, the configuration object will be delivered to every member of the cluster and added to each member&#8217;s dynamic configuration, so mutating the configuration object after the <code>add*Config</code> invocation will have no effect.</p>
</div>
<div class="paragraph">
<p>As dynamically added data structure configuration is propagated across all cluster members, failures may occur due to conditions such as timeout and network partition. The configuration propagation mechanism internally retries adding the configuration whenever a membership change is detected. However if an exception is thrown from <code>add*Config</code> method, the configuration may have been partially propagated to some cluster members and adding the configuration should be retried by the user.</p>
</div>
<div class="paragraph">
<p>Adding new dynamic configuration is supported for all <code>add*Config</code> methods except:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>JobTracker</code> which has been deprecated since Hazelcast 3.8</p>
</li>
<li>
<p><code>QuorumConfig</code>: new quorum configuration cannot be dynamically added but other configuration can reference quorums configured in the existing static configuration</p>
</li>
<li>
<p><code>WanReplicationConfig</code>: new WAN replication configuration cannot be dynamically added, however existing static ones can be referenced from other configurations, e.g., a new dynamic <code>MapConfig</code> may include a <code>WanReplicationRef</code> to a statically configured WAN replication config.</p>
</li>
<li>
<p><code>ListenerConfig</code>: listeners can be instead added at runtime via other API such as <code>HazelcastInstance.getCluster().addMembershipListener</code> and <code>HazelcastInstance.getPartitionService().addMigrationListener</code>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="handling-configuration-conflicts"><a class="anchor" href="#handling-configuration-conflicts"></a><a class="link" href="#handling-configuration-conflicts">4.5.1. Handling Configuration Conflicts</a></h4>
<div class="paragraph">
<p>Attempting to add a dynamic configuration, when a static configuration for the same element already exists, will throw <code>ConfigurationException</code>. For example, assuming we start a member with the following fragment in <code>hazelcast.xml</code> configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;map name=<span class="string"><span class="delimiter">&quot;</span><span class="content">sessions</span><span class="delimiter">&quot;</span></span>&gt;
   ...
&lt;/map&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then adding a dynamic configuration for a map with the name <code>sessions</code> will throw a <code>ConfigurationException</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">HazelcastInstance instance = Hazelcast.newHazelcastInstance();

MapConfig sessionsMapConfig = <span class="keyword">new</span> MapConfig(<span class="string"><span class="delimiter">&quot;</span><span class="content">sessions</span><span class="delimiter">&quot;</span></span>);

<span class="comment">// this will throw ConfigurationException:</span>
instance.getConfig().addMapConfig(sessionsMapConfig);</code></pre>
</div>
</div>
<div class="paragraph">
<p>When attempting to add dynamic configuration for an element for which dynamic configuration has already been added, then if a configuration conflict is detected a <code>ConfigurationException</code> will be thrown. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">HazelcastInstance instance = Hazelcast.newHazelcastInstance();

MapConfig sessionsMapConfig = <span class="keyword">new</span> MapConfig(<span class="string"><span class="delimiter">&quot;</span><span class="content">sessions</span><span class="delimiter">&quot;</span></span>).setBackupCount(<span class="integer">0</span>);
instance.getConfig().addMapConfig(sessionsMapConfig);

MapConfig sessionsWithBackup = <span class="keyword">new</span> MapConfig(<span class="string"><span class="delimiter">&quot;</span><span class="content">sessions</span><span class="delimiter">&quot;</span></span>).setBackupCount(<span class="integer">1</span>);
<span class="comment">// throws ConfigurationException because the new MapConfig conflicts with existing one</span>
instance.getConfig().addMapConfig(sessionsWithBackup);

MapConfig sessionsWithoutBackup = <span class="keyword">new</span> MapConfig(<span class="string"><span class="delimiter">&quot;</span><span class="content">sessions</span><span class="delimiter">&quot;</span></span>).setBackupCount(<span class="integer">0</span>);
<span class="comment">// does not throw exception: new dynamic config is equal to existing dynamic config of same name</span>
instance.getConfig().addMapConfig(sessionsWithoutBackup);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="checking-configuration"><a class="anchor" href="#checking-configuration"></a><a class="link" href="#checking-configuration">4.6. Checking Configuration</a></h3>
<div class="paragraph">
<p>When you start a Hazelcast member without passing a <code>Config</code> object, as explained in the <a href="#configuring-programmatically">Configuring Programmatically section</a>, Hazelcast checks the member&#8217;s configuration as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, it looks for the <code>hazelcast.config</code> system property. If it is set, its value is used as the path. This is useful if you want to be able to change your Hazelcast configuration; you can do this because it is not embedded within the application. You can set the <code>config</code> option with the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">-Dhazelcast.config=<span class="error">`</span>*<span class="error">`</span>&lt;path to the hazelcast.xml&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The path can be a regular one or a classpath reference with the prefix <code>classpath:</code>.</p>
</div>
</li>
<li>
<p>If the above system property is not set, Hazelcast then checks whether there is a <code>hazelcast.xml</code> file in the working directory.</p>
</li>
<li>
<p>If not, it then checks whether <code>hazelcast.xml</code> exists on the classpath.</p>
</li>
<li>
<p>If none of the above works, Hazelcast loads the default configuration (<code>hazelcast.xml</code>) that comes with your Hazelcast package.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Before configuring Hazelcast, please try to work with the default configuration to see if it works for you. This default configuration should be fine for most of the users. If not, you can consider to modify the configuration to be more suitable for your environment.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-pattern-matcher"><a class="anchor" href="#configuration-pattern-matcher"></a><a class="link" href="#configuration-pattern-matcher">4.7. Configuration Pattern Matcher</a></h3>
<div class="paragraph">
<p>You can give a custom strategy to match an item name to a configuration pattern. By default Hazelcast uses a simplified wildcard matching. See <a href="#using-wildcards">Using Wildcards section</a> for this.
A custom configuration pattern matcher can be given by using either member or client <code>config</code> objects. Please see the following example snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Setting a custom config pattern matcher via member config object</span>
Config config = <span class="keyword">new</span> Config();
config.setConfigPatternMatcher(<span class="keyword">new</span> ExampleConfigPatternMatcher());

<span class="comment">// A custom config pattern matcher which throws exception(instead of using `default` config) when config is not found</span>
<span class="comment">// MatchingPointConfigPatternMatcher is the default one used by Hazelcast</span>
<span class="type">class</span> <span class="class">ExampleConfigPatternMatcher</span> <span class="directive">extends</span> MatchingPointConfigPatternMatcher {

<span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">String</span> matches(<span class="predefined-type">Iterable</span>&lt;<span class="predefined-type">String</span>&gt; configPatterns, <span class="predefined-type">String</span> itemName) <span class="directive">throws</span> <span class="exception">ConfigurationException</span> {
 <span class="predefined-type">String</span> matches = <span class="local-variable">super</span>.matches(configPatterns, itemName);
 <span class="keyword">if</span> (matches == <span class="predefined-constant">null</span>) {
       <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ConfigurationException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">No config found for </span><span class="delimiter">&quot;</span></span> + itemName);
 }
  <span class="keyword">return</span> matches;
}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-wildcards"><a class="anchor" href="#using-wildcards"></a><a class="link" href="#using-wildcards">4.8. Using Wildcards</a></h3>
<div class="paragraph">
<p>Hazelcast supports wildcard configuration for all distributed data structures that can be configured using <code>Config</code>, that is, for all except <code>IAtomicLong</code>, <code>IAtomicReference</code>. Using an asterisk (\*) character in the name, different instances of maps, queues, topics, semaphores, etc. can be configured by a single configuration.</p>
</div>
<div class="paragraph">
<p>A single asterisk (\*) can be placed anywhere inside the configuration name.</p>
</div>
<div class="paragraph">
<p>For instance, a map named <code>com.hazelcast.test.mymap</code> can be configured using one of the following configurations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;map</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.hazelcast.test.*</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
...
<span class="tag">&lt;/map&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;map</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.hazel*</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
...
<span class="tag">&lt;/map&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;map</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*.test.mymap</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
...
<span class="tag">&lt;/map&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;map</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.*test.mymap</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
...
<span class="tag">&lt;/map&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or a queue <code>com.hazelcast.test.myqueue</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;queue</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*hazelcast.test.myqueue</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
...
<span class="tag">&lt;/queue&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;queue</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.hazelcast.*.myqueue</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
...
<span class="tag">&lt;/queue&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-variables"><a class="anchor" href="#using-variables"></a><a class="link" href="#using-variables">4.9. Using Variables</a></h3>
<div class="paragraph">
<p>In your Hazelcast and/or Hazelcast Client declarative configuration, you can use variables to set the values of the elements. This is valid when you set a system property programmatically or you use the command line interface. You can use a variable in the declarative configuration to access the values of the system properties you set.</p>
</div>
<div class="paragraph">
<p>For example, see the following command that sets two system properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">-Dgroup.name=dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s get the values of these system properties in the declarative configuration of Hazelcast, as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
  <span class="tag">&lt;group&gt;</span>
    <span class="tag">&lt;name&gt;</span>${group.name}<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;/group&gt;</span>
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This also applies to the declarative configuration of Hazelcast Client, as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast-client&gt;</span>
  <span class="tag">&lt;group&gt;</span>
    <span class="tag">&lt;name&gt;</span>${group.name}<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;/group&gt;</span>
<span class="tag">&lt;/hazelcast-client&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you do not want to rely on the system properties, you can use the <code>XmlConfigBuilder</code> and explicitly set a <code>Properties</code> instance, as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Properties</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();

<span class="comment">// fill the properties, e.g. from database/LDAP, etc.</span>

XmlConfigBuilder builder = <span class="keyword">new</span> XmlConfigBuilder();
builder.setProperties(properties);
Config config = builder.build();
HazelcastInstance hz = Hazelcast.newHazelcastInstance(config);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting-up-clusters"><a class="anchor" href="#setting-up-clusters"></a><a class="link" href="#setting-up-clusters">5. Setting Up Clusters</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes Hazelcast clusters and the methods cluster members and native clients use to form a Hazelcast cluster.</p>
</div>
<div class="sect2">
<h3 id="discovery-mechanisms"><a class="anchor" href="#discovery-mechanisms"></a><a class="link" href="#discovery-mechanisms">5.1. Discovery Mechanisms</a></h3>
<div class="paragraph">
<p>A Hazelcast cluster is a network of cluster members that run Hazelcast. Cluster members (also called nodes) automatically join together to form a cluster. This automatic joining takes place with various discovery mechanisms that the cluster members use to find each other.</p>
</div>
<div class="paragraph">
<p>Please note that, after a cluster is formed, communication between cluster members is always via TCP/IP, regardless of the discovery mechanism used.</p>
</div>
<div class="paragraph">
<p>Hazelcast uses the following discovery mechanisms.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can refer to the <a href="https://hazelcast.com/resources/hazelcast-deployment-operations-guide/">Hazelcast IMDG Deployment and Operations Guide</a> for advice on the best discovery mechanism to use.*
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="tcp"><a class="anchor" href="#tcp"></a><a class="link" href="#tcp">5.1.1. TCP</a></h4>
<div class="paragraph">
<p>You can configure Hazelcast to be a full TCP/IP cluster. Please see the <a href="#discovering-members-by-tcp">Discovering Members by TCP</a> section for configuration details.</p>
</div>
</div>
<div class="sect3">
<h4 id="multicast"><a class="anchor" href="#multicast"></a><a class="link" href="#multicast">5.1.2. Multicast</a></h4>
<div class="paragraph">
<p>Multicast mechanism is not recommended for production since UDP is often blocked in production environments and other discovery mechanisms are more definite.</p>
</div>
<div class="paragraph">
<p>With this mechanism, Hazelcast allows cluster members to find each other using multicast communication. Please see the <a href="#discovering-members-by-multicast">Discovering Members by Multicast</a> section.</p>
</div>
</div>
<div class="sect3">
<h4 id="aws-cloud-discovery"><a class="anchor" href="#aws-cloud-discovery"></a><a class="link" href="#aws-cloud-discovery">5.1.3. AWS Cloud Discovery</a></h4>
<div class="paragraph">
<p>Hazelcast supports EC2 auto-discovery. It is useful when you do not want to provide or you cannot provide the list of possible IP addresses. This discovery feature is provided as a Hazelcast plugin. Please see its <a href="https://github.com/hazelcast/hazelcast-aws/blob/master/README.md">documentation</a> for information on configuring and using it.</p>
</div>
</div>
<div class="sect3">
<h4 id="apache-jclous-cloud-discovery"><a class="anchor" href="#apache-jclous-cloud-discovery"></a><a class="link" href="#apache-jclous-cloud-discovery">5.1.4. Apache jclouds® Cloud Discovery</a></h4>
<div class="paragraph">
<p>Hazelcast members and native clients support jclouds® for discovery. This mechanism allows applications to be deployed in various cloud infrastructure ecosystems in an infrastructure-agnostic way. This discovery feature is provided as a Hazelcast plugin. Please see its <a href="https://github.com/hazelcast/hazelcast-jclouds/blob/master/README.md">documentation</a> for information on configuring and using it.</p>
</div>
</div>
<div class="sect3">
<h4 id="azure-cloud-discovery"><a class="anchor" href="#azure-cloud-discovery"></a><a class="link" href="#azure-cloud-discovery">5.1.5. Azure Cloud Discovery</a></h4>
<div class="paragraph">
<p>Hazelcast offers a discovery strategy for your Hazelcast applications running on Azure. This strategy provides all of your Hazelcast instances by returning the virtual machines within your Azure resource group that are tagged with a specified value. This discovery feature is provided as a Hazelcast plugin. Please see its <a href="https://github.com/hazelcast/hazelcast-azure/blob/master/README.md">documentation</a> for information on configuring and using it.</p>
</div>
</div>
<div class="sect3">
<h4 id="zookeeper-cloud-discovery"><a class="anchor" href="#zookeeper-cloud-discovery"></a><a class="link" href="#zookeeper-cloud-discovery">5.1.6. Zookeeper Cloud Discovery</a></h4>
<div class="paragraph">
<p>This discovery mechanism provides a service based discovery strategy by using Apache Curator to communicate with your Zookeeper server. You can use this plugin with <a href="#discovery-spi">Discovery SPI</a> enabled Hazelcast 3.6.1 and higher applications. This is provided as a Hazelcast plugin. Please see its <a href="https://github.com/hazelcast/hazelcast-zookeeper/blob/master/README.md">documentation</a> for information on configuring and using it.</p>
</div>
</div>
<div class="sect3">
<h4 id="condul-cloud-discovery"><a class="anchor" href="#condul-cloud-discovery"></a><a class="link" href="#condul-cloud-discovery">5.1.7. Consul Cloud Discovery</a></h4>
<div class="paragraph">
<p>Consul is a highly available and distributed service discovery and key-value store designed with support for the modern data center to make distributed systems and configuration easy. This mechanism provides a Consul based discovery strategy for Hazelcast enabled applications (Hazelcast 3.6 and higher) and enables Hazelcast members to dynamically discover one another via Consul. This discovery feature is provided as a Hazelcast plugin. Please see its <a href="https://github.com/bitsofinfo/hazelcast-consul-discovery-spi">documentation</a> for information on configuring and using it.</p>
</div>
</div>
<div class="sect3">
<h4 id="etcd-cloud-discovery"><a class="anchor" href="#etcd-cloud-discovery"></a><a class="link" href="#etcd-cloud-discovery">5.1.8. etcd Cloud Discovery</a></h4>
<div class="paragraph">
<p>This mechanism provides an <a href="https://coreos.com/etcd/">etcd</a> based discovery strategy for Hazelcast enabled applications (Hazelcast 3.6 and higher). This is an easy to configure plug-and-play Hazelcast discovery strategy that will optionally register each of your Hazelcast members with etcd and enable Hazelcast members to dynamically discover one another via etcd. This discovery feature is provided as a Hazelcast plugin. Please see its <a href="https://github.com/bitsofinfo/hazelcast-etcd-discovery-spi/blob/master/README.md">documentation</a> for information on configuring and using it.</p>
</div>
</div>
<div class="sect3">
<h4 id="hazelcast-for-pcf"><a class="anchor" href="#hazelcast-for-pcf"></a><a class="link" href="#hazelcast-for-pcf">5.1.9. Hazelcast for PCF</a></h4>
<div class="paragraph">
<p>Using a clickable Hazelcast Tile for Pivotal Cloud Foundry (PCF), you can deploy your Hazelcast cluster on PCF. This feature is provided as a Hazelcast plugin. Please see its <a href="https://docs.pivotal.io/partners/hazelcast/index.html">documentation</a> on how to install, configure and use the plugin Hazelcast for PCF.</p>
</div>
</div>
<div class="sect3">
<h4 id="hazelcast-openshift-integration"><a class="anchor" href="#hazelcast-openshift-integration"></a><a class="link" href="#hazelcast-openshift-integration">5.1.10. Hazelcast OpenShift Integration</a></h4>
<div class="paragraph">
<p>Hazelcast can run inside OpenShift benefiting from its cluster management software Kubernetes for discovery of members. Using Hazelcast Docker images, templates and default configuration files, you can deploy Hazelcast IMDG and Hazelcast IMDG Enterprise onto OpenShift. This discovery feature is provided as a Hazelcast plugin. Please see its <a href="https://github.com/hazelcast/hazelcast-openshift">documentation</a> for information on this deployment.</p>
</div>
</div>
<div class="sect3">
<h4 id="eureka-cloud-discovery"><a class="anchor" href="#eureka-cloud-discovery"></a><a class="link" href="#eureka-cloud-discovery">5.1.11. Eureka Cloud Discovery</a></h4>
<div class="paragraph">
<p>Eureka is a REST based service that is primarily used in the AWS cloud for locating services for the purpose of load balancing and failover of middle-tier servers. Hazelcast supports Eureka V1 discovery; Hazelcast members within EC2 Virtual Private Cloud can discover each other using this mechanism. This discovery feature is provided as a Hazelcast plugin. Please see its <a href="https://github.com/hazelcast/hazelcast-eureka">documentation</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="heroku-cloud-discovery"><a class="anchor" href="#heroku-cloud-discovery"></a><a class="link" href="#heroku-cloud-discovery">5.1.12. Heroku Cloud Discovery</a></h4>
<div class="paragraph">
<p>Heroku is a platform as a service (PaaS) with which you can build, run, and operate applications entirely in the cloud. It is a cloud platform based on a managed container system, with integrated data services and a powerful ecosystem. Hazelcast offers a discovery plugin that looks for IP addresses of other members by resolving service names against the Heroku DNS Discovery in Heroku Private Spaces. This discovery feature is provided as a Hazelcast plugin. Please see its <a href="https://github.com/jkutner/hazelcast-heroku-discovery/blob/master/README.md">documentation</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="kubernetes-cloud-discovery"><a class="anchor" href="#kubernetes-cloud-discovery"></a><a class="link" href="#kubernetes-cloud-discovery">5.1.13. Kubernetes Cloud Discovery</a></h4>
<div class="paragraph">
<p>Kubernetes is an open source system for automating deployment, scaling, and management of containerized applications. Hazelcast provides Kubernetes discovery mechanism that looks for IP addresses of other members by resolving the requests against a Kubernetes Service Discovery system. It supports two different options of resolving against the discovery registry: (i) a request to the REST API, (ii) DNS Lookup against a given DNS service name. This discovery feature is provided as a Hazelcast plugin. Please see its <a href="https://github.com/hazelcast/hazelcast-kubernetes/blob/master/README.adoc">documentation</a> for information on configuring and using it.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="discovering-members-by-tcp"><a class="anchor" href="#discovering-members-by-tcp"></a><a class="link" href="#discovering-members-by-tcp">5.2. Discovering Members by TCP</a></h3>
<div class="paragraph">
<p>If multicast is not the preferred way of discovery for your environment, then you can configure Hazelcast to be a full TCP/IP cluster. When you configure Hazelcast to discover members by TCP/IP, you must list all or a subset of the members' hostnames and/or IP addresses as cluster members. You do not have to list all of these cluster members, but at least one of the listed members has to be active in the cluster when a new member joins.</p>
</div>
<div class="paragraph">
<p>To set your Hazelcast to be a full TCP/IP cluster, set the following configuration elements. Please refer to the <a href="#tcp-ip-element">tcp-ip element section</a> for the full description of the TCP/IP discovery configuration elements.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set the <code>enabled</code> attribute of the <code>multicast</code> element to "false".</p>
</li>
<li>
<p>Set the <code>enabled</code> attribute of the <code>aws</code> element to "false".</p>
</li>
<li>
<p>Set the <code>enabled</code> attribute of the <code>tcp-ip</code> element to "true".</p>
</li>
<li>
<p>Set your <code>member</code> elements within the <code>tcp-ip</code> element.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following is an example declarative configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
   ...
  <span class="tag">&lt;network&gt;</span>
    ...
    <span class="tag">&lt;join&gt;</span>
      <span class="tag">&lt;multicast</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;/multicast&gt;</span>
      <span class="tag">&lt;tcp-ip</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;member&gt;</span>machine1<span class="tag">&lt;/member&gt;</span>
        <span class="tag">&lt;member&gt;</span>machine2<span class="tag">&lt;/member&gt;</span>
        <span class="tag">&lt;member&gt;</span>machine3:5799<span class="tag">&lt;/member&gt;</span>
        <span class="tag">&lt;member&gt;</span>192.168.1.0-7<span class="tag">&lt;/member&gt;</span>
        <span class="tag">&lt;member&gt;</span>192.168.1.21<span class="tag">&lt;/member&gt;</span>
      <span class="tag">&lt;/tcp-ip&gt;</span>
      ...
    <span class="tag">&lt;/join&gt;</span>
    ...
  <span class="tag">&lt;/network&gt;</span>
  ...
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As shown above, you can provide IP addresses or hostnames for <code>member</code> elements. You can also give a range of IP addresses, such as <code>192.168.1.0-7</code>.</p>
</div>
<div class="paragraph">
<p>Instead of providing members line-by-line as shown above, you also have the option to use the <code>members</code> element and write comma-separated IP addresses, as shown below.</p>
</div>
<div class="paragraph">
<p><code>&lt;members&gt;192.168.1.0-7,192.168.1.21&lt;/members&gt;</code></p>
</div>
<div class="paragraph">
<p>If you do not provide ports for the members, Hazelcast automatically tries the ports 5701, 5702, and so on.</p>
</div>
<div class="paragraph">
<p>By default, Hazelcast binds to all local network interfaces to accept incoming traffic. You can change this behavior using the system property <code>hazelcast.socket.bind.any</code>. If you set this property to <code>false</code>, Hazelcast uses the interfaces specified in the <code>interfaces</code> element (please refer to the <a href="#interfaces">Interfaces Configuration section</a>). If no interfaces are provided, then it will try to resolve one interface to bind from the <code>member</code> elements.</p>
</div>
</div>
<div class="sect2">
<h3 id="discovering-members-by-multicast"><a class="anchor" href="#discovering-members-by-multicast"></a><a class="link" href="#discovering-members-by-multicast">5.3. Discovering Members by Multicast</a></h3>
<div class="paragraph">
<p>With the multicast auto-discovery mechanism, Hazelcast allows cluster members to find each other using multicast communication. The cluster members do not need to know the concrete addresses of the other members, as they just multicast to all the other members for listening. Whether multicast is possible or allowed depends on your environment.</p>
</div>
<div class="paragraph">
<p>To set your Hazelcast to multicast auto-discovery, set the following configuration elements. Please refer to the <a href="#multicast-element">multicast element section</a> for the full description of the multicast discovery configuration elements.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set the <code>enabled</code> attribute of the <code>multicast</code> element to "true".</p>
</li>
<li>
<p>Set <code>multicast-group</code>, <code>multicast-port</code>, <code>multicast-time-to-live</code>, etc. to your multicast values.</p>
</li>
<li>
<p>Set the <code>enabled</code> attribute of both <code>tcp-ip</code> and <code>aws</code> elements to "false".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following is an example declarative configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
   ...
  <span class="tag">&lt;network&gt;</span>
    ...
        <span class="tag">&lt;join&gt;</span>
            <span class="tag">&lt;multicast</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;multicast-group&gt;</span>224.2.2.3<span class="tag">&lt;/multicast-group&gt;</span>
                <span class="tag">&lt;multicast-port&gt;</span>54327<span class="tag">&lt;/multicast-port&gt;</span>
                <span class="tag">&lt;multicast-time-to-live&gt;</span>32<span class="tag">&lt;/multicast-time-to-live&gt;</span>
                <span class="tag">&lt;multicast-timeout-seconds&gt;</span>2<span class="tag">&lt;/multicast-timeout-seconds&gt;</span>
                <span class="tag">&lt;trusted-interfaces&gt;</span>
                   <span class="tag">&lt;interface&gt;</span>192.168.1.102<span class="tag">&lt;/interface&gt;</span>
                <span class="tag">&lt;/trusted-interfaces&gt;</span>
            <span class="tag">&lt;/multicast&gt;</span>
            <span class="tag">&lt;tcp-ip</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;/tcp-ip&gt;</span>
            <span class="tag">&lt;aws</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;/aws&gt;</span>
        <span class="tag">&lt;/join&gt;</span>
  <span class="tag">&lt;/network&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Pay attention to the <code>multicast-timeout-seconds</code> element. <code>multicast-timeout-seconds</code> specifies the time in seconds that a member should wait for a valid multicast response from another member running in the network before declaring itself the leader member (the first member joined to the cluster) and creating its own cluster. This only applies to the startup of members where no leader has been assigned yet. If you specify a high value to <code>multicast-timeout-seconds</code>, such as 60 seconds, it means that until a leader is selected, each member will wait 60 seconds before moving on. Be careful when providing a high value. Also, be careful not to set the value too low, or the members might give up too early and create their own cluster.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Multicast auto-discovery is not supported for Hazelcast native clients yet. However, we offer Multicast Discovery Plugin for this purpose. Please refer to the <a href="#discovering-native-clients">Discovering Native Clients section</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="discovering-native-clients"><a class="anchor" href="#discovering-native-clients"></a><a class="link" href="#discovering-native-clients">5.4. Discovering Native Clients</a></h3>
<div class="paragraph">
<p>Hazelcast members and native Java clients can find each other with multicast discovery plugin. This plugin is implemented using <a href="#discovery-spi">Hazelcast Discovery SPI</a>. You should configure the plugin both at Hazelcast members and Java clients in order to use multicast discovery.</p>
</div>
<div class="paragraph">
<p>To configure your cluster to have the multicast discovery plugin, follow these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Disable the multicast and TCP/IP join mechanisms. To do this, set the <code>enabled</code> attributes of the <code>multicast</code> and <code>tcp-ip</code> elements to <code>false</code> in your <code>hazelcast.xml</code> configuration file</p>
</li>
<li>
<p>Set the <code>enabled</code> attribute of the <code>hazelcast.discovery.enabled</code> property to <code>true</code>.</p>
</li>
<li>
<p>Add multicast discovery strategy configuration to your XML file, i.e., <code>&lt;discovery-strategies&gt;</code> element.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following is an example declarative configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> ...
  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.discovery.enabled</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>true<span class="tag">&lt;/property&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>
   ....
 <span class="tag">&lt;join&gt;</span>
    <span class="tag">&lt;multicast</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;/multicast&gt;</span>
    <span class="tag">&lt;tcp-ip</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;/tcp-ip&gt;</span>
    <span class="tag">&lt;discovery-strategies&gt;</span>
        <span class="tag">&lt;discovery-strategy</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.hazelcast.spi.discovery.multicast.MulticastDiscoveryStrategy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;properties&gt;</span>
          <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">group</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>224.2.2.3<span class="tag">&lt;/property&gt;</span>
          <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>54327<span class="tag">&lt;/property&gt;</span>
          <span class="tag">&lt;/properties&gt;</span>
        <span class="tag">&lt;/discovery-strategy&gt;</span>
    <span class="tag">&lt;/discovery-strategies&gt;</span>
<span class="tag">&lt;/join&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are the multicast discovery plugin configuration properties with their descriptions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>group</code>: String value that is used to set the multicast group, so that you can isolate your clusters.</p>
</li>
<li>
<p><code>port</code>: Integer value that is used to set the multicast port.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="creating-cluster-groups"><a class="anchor" href="#creating-cluster-groups"></a><a class="link" href="#creating-cluster-groups">5.5. Creating Cluster Groups</a></h3>
<div class="paragraph">
<p>You can create cluster groups. To do this, use the <code>group</code> configuration element.</p>
</div>
<div class="paragraph">
<p>You can separate your clusters in a simple way by specifying group names. Example groupings can be by <strong>development</strong>, <strong>production</strong>, <strong>test</strong>, <strong>app</strong>, etc. The following is an example declarative configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
  <span class="tag">&lt;group&gt;</span>
    <span class="tag">&lt;name&gt;</span>production<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;/group&gt;</span>
  ...
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also define the cluster groups using the programmatic configuration. A JVM can host multiple Hazelcast instances. Each Hazelcast instance can only participate in one group. Each Hazelcast instance only joins to its own group and does not interact with other groups. The following code example creates three separate Hazelcast instances--<code>h1</code> belongs to the <code>production</code> cluster, while <code>h2</code> and <code>h3</code> belong to the <code>development</code> cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config configProd = <span class="keyword">new</span> Config();
configProd.getGroupConfig().setName( <span class="string"><span class="delimiter">&quot;</span><span class="content">production</span><span class="delimiter">&quot;</span></span> );

Config configDev = <span class="keyword">new</span> Config();
configDev.getGroupConfig().setName( <span class="string"><span class="delimiter">&quot;</span><span class="content">development</span><span class="delimiter">&quot;</span></span> );

HazelcastInstance h1 = Hazelcast.newHazelcastInstance( configProd );
HazelcastInstance h2 = Hazelcast.newHazelcastInstance( configDev );
HazelcastInstance h3 = Hazelcast.newHazelcastInstance( configDev );</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="cluster-groups-before-hazelcast-382"><a class="anchor" href="#cluster-groups-before-hazelcast-382"></a><a class="link" href="#cluster-groups-before-hazelcast-382">5.5.1. Cluster Groups before Hazelcast 3.8.2</a></h4>
<div class="paragraph">
<p>If you have a Hazelcast release older than 3.8.2, you need to provide also a group password along with the group name. The following are the configuration examples with the password element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
  <span class="tag">&lt;group&gt;</span>
    <span class="tag">&lt;name&gt;</span>production<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;password&gt;</span>prod-pass<span class="tag">&lt;/password&gt;</span>
  <span class="tag">&lt;/group&gt;</span>
  ...
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config configProd = <span class="keyword">new</span> Config();
configProd.getGroupConfig().setName( <span class="string"><span class="delimiter">&quot;</span><span class="content">production</span><span class="delimiter">&quot;</span></span> ).setPassword( <span class="string"><span class="delimiter">&quot;</span><span class="content">prod-pass</span><span class="delimiter">&quot;</span></span> );

Config configDev = <span class="keyword">new</span> Config();
configDev.getGroupConfig().setName( <span class="string"><span class="delimiter">&quot;</span><span class="content">development</span><span class="delimiter">&quot;</span></span> ).setPassword( <span class="string"><span class="delimiter">&quot;</span><span class="content">dev-pass</span><span class="delimiter">&quot;</span></span> );

HazelcastInstance h1 = Hazelcast.newHazelcastInstance( configProd );
HazelcastInstance h2 = Hazelcast.newHazelcastInstance( configDev );
HazelcastInstance h3 = Hazelcast.newHazelcastInstance( configDev );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Starting with 3.8.2, there is no need for a group password.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="member-user-code-deployment-beta"><a class="anchor" href="#member-user-code-deployment-beta"></a><a class="link" href="#member-user-code-deployment-beta">5.6. Member User Code Deployment - BETA</a></h3>
<div class="paragraph">
<p>Hazelcast can dynamically load your custom classes or domain classes from a remote class repository, which typically includes <a href="#enabling-lite-members">lite members</a>. For this purpose Hazelcast offers a distributed  dynamic class loader.</p>
</div>
<div class="paragraph">
<p>Using this dynamic class loader, you can control the local caching of the classes loaded from other members,
control the classes to be served to other members, and create blacklists or whitelists of classes and packages. When you enable this feature, you will not have to deploy your classes to all cluster members.</p>
</div>
<div class="paragraph">
<p>The following is the brief working mechanism of the User Code Deployment feature:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Dynamic class loader first checks the local classes, i.e., your classpath, for your custom class. If it is there, Hazelcast does not try to load it from the remote class repository.</p>
</li>
<li>
<p>Then, it checks the cache of classes loaded from the remote class repository (for this, caching should have been enabled in your local, please refer to <a href="#configuring-user-code-deployment">Configuring User Code Deployment section</a>). If your class is found here, again, Hazelcast does not try to load it from the remote class repository.</p>
</li>
<li>
<p>Finally, dynamic class loader checks the remote class repository. If a member in this repository returns the class, it means your class is found and will be used. You can also put this class into your local class cache as mentioned in the previous step.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="configuring-user-code-deployment"><a class="anchor" href="#configuring-user-code-deployment"></a><a class="link" href="#configuring-user-code-deployment">5.6.1. Configuring User Code Deployment</a></h4>
<div class="paragraph">
<p>User Code Deployment feature is not enabled by default. You can configure this feature declaratively or programmatically. Following are example configuration snippets:</p>
</div>
<div class="paragraph">
<p><strong>Declarative Configuration</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;user-code-deployment</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;class-cache-mode&gt;</span>ETERNAL<span class="tag">&lt;/class-cache-mode&gt;</span>
        <span class="tag">&lt;provider-mode&gt;</span>LOCAL_CLASSES_ONLY<span class="tag">&lt;/provider-mode&gt;</span>
        <span class="tag">&lt;blacklist-prefixes&gt;</span>com.foo<span class="tag">&lt;/blacklist-prefixes&gt;</span>
        <span class="tag">&lt;whitelist-prefixes&gt;</span>com.bar.MyClass<span class="tag">&lt;/whitelist-prefixes&gt;</span>
        <span class="tag">&lt;provider-filter&gt;</span>HAS_ATTRIBUTE:lite<span class="tag">&lt;/provider-filter&gt;</span>
<span class="tag">&lt;/user-code-deployment&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic Configuration</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config();
UserCodeDeploymentConfig distCLConfig = config.getUserCodeDeploymentConfig();
distCLConfig.setEnabled( <span class="predefined-constant">true</span> )
        .setClassCacheMode( ClassCacheMode.ETERNAL )
        .setProviderMode( ProviderMode.LOCAL_CLASSES_ONLY )
        .setBlacklistedPrefixes( <span class="string"><span class="delimiter">&quot;</span><span class="content">com.foo</span><span class="delimiter">&quot;</span></span> )
        .setWhitelistedPrefixes( <span class="string"><span class="delimiter">&quot;</span><span class="content">com.bar.MyClass</span><span class="delimiter">&quot;</span></span> )
        .setProviderFilter( <span class="string"><span class="delimiter">&quot;</span><span class="content">HAS_ATTRIBUTE:lite</span><span class="delimiter">&quot;</span></span> );</code></pre>
</div>
</div>
<div class="paragraph">
<p>User Code Deployment has the following configuration elements and attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code>: Specifies whether dynamic class loading is enabled or not. Its default value is "true" and it is a mandatory attribute.</p>
</li>
<li>
<p><code>&lt;class-cache-mode&gt;</code>: Controls the local caching behavior for the classes loaded from the remote class repository. Available values are as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>ETERNAL</code>: Cache the loaded classes locally. This is the default value and suitable when you load long-living objects, such as domain objects stored in a map.</p>
</li>
<li>
<p><code>OFF</code>: Do not cache the loaded classes locally. It is suitable for loading runnables, callables, entry processors, etc.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>&lt;provider-mode&gt;</code>: Controls how the classes are served to the other cluster members. Available values are as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>LOCAL_AND_CACHED_CLASSES</code>: Serve classes loaded from both local classpath and from other members. This is the default value.</p>
</li>
<li>
<p><code>LOCAL_CLASSES_ONLY</code>: Serve classes from the local classpath only. Classes loaded from other members will be used locally, but they are not served to other members.</p>
</li>
<li>
<p><code>OFF</code>: Never serve classes to other members.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>&lt;blacklist-prefixes&gt;</code>: Comma separated name prefixes of classes/packages to be prevented from dynamic class loading. For example, if you set it as "com.foo", remote loading of all classes from the "com.foo" package will be blacklisted, including the classes from all its sub-packages. If you set it as "com.foo.Class", then the "Class" and all classes having the "Class" as prefix in the "com.foo" package will be blacklisted. There are some built-in prefixes which are blacklisted by default. These are as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>javax.</code></p>
</li>
<li>
<p><code>java.</code></p>
</li>
<li>
<p><code>sun.</code></p>
</li>
<li>
<p><code>com.hazelcast.</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>&lt;whitelist-prefixes&gt;</code>: Comma separated name prefixes of classes/packages only from which the classes will be loaded. It allows to quickly configure remote loading only for classes from selected packages. It can be used together with blacklisting. For example, you can whitelist the prefix "com.foo" and blacklist the prefix "com.foo.secret".</p>
</li>
<li>
<p><code>&lt;provider-filter&gt;</code>: Filter to constraint members to be used for a class loading request when a class is not available locally. The value is in the format "HAS_ATTRIBUTE:foo". When it is set as "HAS_ATTRIBUTE:foo", the class loading request will only be sent to the members which have "foo" as a <a href="#defining-member-attributes">member attribute</a>. Setting this to null will allow to load classes from all members. Please see an example in the below section.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="example-for-filtering-members"><a class="anchor" href="#example-for-filtering-members"></a><a class="link" href="#example-for-filtering-members">5.6.2. Example for Filtering Members</a></h4>
<div class="paragraph">
<p>As described above, the configuration element <code>provider-filter</code> is used to constrain a member to load classes only from a subset of all cluster members. The value of the <code>provider-filter</code> must be set as a member attribute in the desired members from which the classes will be loaded. Please see the following example usage provided as programmatic configurations.</p>
</div>
<div class="paragraph">
<p>The below example configuration will allow the Hazelcast member to load classes only from members with the <code>class-provider</code> attribute set. It will not ask any other member to provide a locally unavailable class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config hazelcastConfig = <span class="keyword">new</span> Config();
DistributedClassloadingConfig distributedClassloadingConfig = hazelcastConfig.getDistributedClassloadingConfig();
distributedClassloadingConfig.setProviderFilter(<span class="string"><span class="delimiter">&quot;</span><span class="content">HAS_ATTRIBUTE:class-provider</span><span class="delimiter">&quot;</span></span>);

HazecastInstance instance = Hazelcast.newHazelcastInstance(hazelcastConfig);</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the below example configuration sets the attribute <code>class-provider</code> for a member. So, the above member will load classes from the members who have the attribute <code>class-provider</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config hazelcastConfig = <span class="keyword">new</span> Config();
MemberAttributeConfig memberAttributes = hazelcastConfig.getMemberAttributeConfig();
memberAttributes.setAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">class-provider</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>);

HazecastInstance instance = Hazelcast.newHazelcastInstance(hazelcastConfig);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="client-user-code-deployment-beta"><a class="anchor" href="#client-user-code-deployment-beta"></a><a class="link" href="#client-user-code-deployment-beta">5.7. Client User Code Deployment - BETA</a></h3>
<div class="paragraph">
<p>You can use the User Code Deployment at the client side for the following situations:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You have objects that will run on the cluster via the clients such as <code>Runnable</code>, <code>Callable</code>, and Entry Processors.</p>
</li>
<li>
<p>You have new or amended user domain objects (in-memory format of the IMap set to <code>Object</code>) which need to be deployed into the cluster.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When this feature is enabled, the clients will deploy these classes to the members. By this way, when a client adds a new class, the members will not require restarts to include the new classes in classpath.</p>
</div>
<div class="paragraph">
<p>You can also use the client permission policy to specify which clients are permitted to use User Code Deployment. Please see the <a href="#permissions">Permissions</a>.</p>
</div>
<div class="sect3">
<h4 id="configuring-client-user-code-deployment"><a class="anchor" href="#configuring-client-user-code-deployment"></a><a class="link" href="#configuring-client-user-code-deployment">5.7.1. Configuring Client User Code Deployment</a></h4>
<div class="paragraph">
<p>Client User Code Deployment feature is not enabled by default. You can configure this feature declaratively or programmatically. Following are example configuration snippets:</p>
</div>
<div class="paragraph">
<p><strong>Declarative Configuration</strong></p>
</div>
<div class="paragraph">
<p>In your <code>hazelcast-client.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;user-code-deployment</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;jarPaths&gt;</span>
        <span class="tag">&lt;jarPath&gt;</span>/User/sample/sample.jar<span class="tag">&lt;/jarPath&gt;</span>
        <span class="tag">&lt;jarPath&gt;</span>sample.jar<span class="tag">&lt;/jarPath&gt;</span> <span class="comment">&lt;!--from class path --&gt;</span>
        <span class="tag">&lt;jarPath&gt;</span>https://com.sample.com/sample.jar<span class="tag">&lt;/jarPath&gt;</span>
        <span class="tag">&lt;jarPath&gt;</span>file://Users/sample/sample.jar<span class="tag">&lt;/jarPath&gt;</span>
    <span class="tag">&lt;/jarPaths&gt;</span>
    <span class="tag">&lt;classNames&gt;</span>
            <span class="comment">&lt;!-- for the classes available in client class path --&gt;</span>
        <span class="tag">&lt;className&gt;</span>sample.ClassName<span class="tag">&lt;/className&gt;</span>
        <span class="tag">&lt;className&gt;</span>sample.ClassName2<span class="tag">&lt;/className&gt;</span>
    <span class="tag">&lt;/classNames&gt;</span>
<span class="tag">&lt;/user-code-deployment&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic Configuration</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ClientConfig clientConfig = <span class="keyword">new</span> ClientConfig();
ClientUserCodeDeploymentConfig clientUserCodeDeploymentConfig = <span class="keyword">new</span> ClientUserCodeDeploymentConfig();

clientUserCodeDeploymentConfig.addJar(<span class="string"><span class="delimiter">&quot;</span><span class="content">/User/sample/sample.jar</span><span class="delimiter">&quot;</span></span>);
clientUserCodeDeploymentConfig.addJar(<span class="string"><span class="delimiter">&quot;</span><span class="content">https://com.sample.com/sample.jar</span><span class="delimiter">&quot;</span></span>);
clientUserCodeDeploymentConfig.addClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">sample.ClassName</span><span class="delimiter">&quot;</span></span>);
clientUserCodeDeploymentConfig.addClass(<span class="string"><span class="delimiter">&quot;</span><span class="content">sample.ClassName2</span><span class="delimiter">&quot;</span></span>);

clientUserCodeDeploymentConfig.setEnabled(<span class="predefined-constant">true</span>);
clientConfig.setUserCodeDeploymentConfig(clientUserCodeDeploymentConfig);</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="client-user-code-deployment-note"><a class="anchor" href="#client-user-code-deployment-note"></a><a class="link" href="#client-user-code-deployment-note">Important to Know</a></h5>
<div class="paragraph">
<p>Note that User Code Deployment should also be enabled on the members to use this feature.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config();
UserCodeDeploymentConfig userCodeDeploymentConfig = config.getUserCodeDeploymentConfig();
userCodeDeploymentConfig.setEnabled( <span class="predefined-constant">true</span> );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please refer to the <a href="#member-user-code-deployment-beta">Member User Code Deployment section</a> for more information on enabling it on the member side and its configuration properties.</p>
</div>
<div class="paragraph">
<p>For the property <code>class-cache-mode</code>, Client User Code Deployment supports only the <code>ETERNAL</code> mode, regardless of the configuration set at the member side (which can be <code>ETERNAL</code> and <code>OFF</code>).</p>
</div>
<div class="paragraph">
<p>For the property, <code>provider-mode</code>, Client User Code Deployment supports only the <code>LOCAL_AND_CACHED_CLASSES</code> mode, regardless of the configuration set at the member side (which can be <code>LOCAL_AND_CACHED_CLASSES</code>, <code>LOCAL_CLASSES_ONLY</code> and <code>OFF</code>).</p>
</div>
<div class="paragraph">
<p>The remaining properties, which are <code>blacklist-prefixes</code>, <code>whitelist-prefixes</code> and <code>provider-filter</code> configured at the member side, will effect the client user code deployment&#8217;s behavior too. For example, assuming that you provide <code>com.foo</code> as a blacklist prefix at the member side, the member will discard the classes with the prefix <code>com.foo</code> loaded by the client.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="partition-group-configuration"><a class="anchor" href="#partition-group-configuration"></a><a class="link" href="#partition-group-configuration">5.8. Partition Group Configuration</a></h3>
<div class="paragraph">
<p>Hazelcast distributes key objects into partitions using the consistent hashing algorithm. Multiple replicas are created for each partition and those partition replicas are distributed among Hazelcast members. An entry is stored in the members that own replicas of the partition to which the entry&#8217;s key is assigned. The total partition count is 271 by default; you can change it with the configuration property <code>hazelcast.partition.count</code>. Please see the <a href="#system-properties">System Properties section</a>.</p>
</div>
<div class="paragraph">
<p>Hazelcast member that owns the primary replica of a partition is called as partition owner. Other replicas are called backups. Based on the configuration, a key object can be kept in multiple replicas of a partition. A member can hold at most one replica of a partition (ownership or backup).</p>
</div>
<div class="paragraph">
<p>By default, Hazelcast distributes partition replicas randomly and equally among the cluster members, assuming all members in the cluster are identical. But what if some members share the same JVM or physical machine or chassis and you want backups of these members to be assigned to members in another machine or chassis? What if processing or memory capacities of some members are different and you do not want an equal number of partitions to be assigned to all members?</p>
</div>
<div class="paragraph">
<p>To deal with such scenarios, you can group members in the same JVM (or physical machine) or members located in the same chassis. Or you can group members to create identical capacity. We call these groups <strong>partition groups</strong>. Partitions are assigned to those partition groups instead of individual members. Backup replicas of a partition which is owned by a partition group are located in other partition groups.</p>
</div>
<div class="sect3">
<h4 id="grouping-types"><a class="anchor" href="#grouping-types"></a><a class="link" href="#grouping-types">5.8.1. Grouping Types</a></h4>
<div class="paragraph">
<p>When you enable partition grouping, Hazelcast presents the following choices for you to configure partition groups.</p>
</div>
<div class="paragraph">
<p><strong>1. HOST_AWARE:</strong></p>
</div>
<div class="paragraph">
<p>You can group members automatically using the IP addresses of members, so members sharing the same network interface will be grouped together. All members on the same host (IP address or domain name) will be a single partition group. This helps to avoid data loss when a physical server crashes, because multiple replicas of the same partition are not stored on the same host. But if there are multiple network interfaces or domain names per physical machine, that will make this assumption invalid.</p>
</div>
<div class="paragraph">
<p>Following are declarative and programmatic configuration snippets that show how to enable HOST_AWARE grouping.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;partition-group enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> group-type=<span class="string"><span class="delimiter">&quot;</span><span class="content">HOST_AWARE</span><span class="delimiter">&quot;</span></span> /&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = ...;
PartitionGroupConfig partitionGroupConfig = config.getPartitionGroupConfig();
partitionGroupConfig.setEnabled( <span class="predefined-constant">true</span> )
    .setGroupType( MemberGroupType.HOST_AWARE );</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>2. CUSTOM:</strong></p>
</div>
<div class="paragraph">
<p>You can do custom grouping using Hazelcast&#8217;s interface matching configuration. This way, you can add different and multiple interfaces to a group. You can also use wildcards in the interface addresses. For example, the users can create rack-aware or data warehouse partition groups using custom partition grouping.</p>
</div>
<div class="paragraph">
<p>Following are declarative and programmatic configuration examples that show how to enable and use CUSTOM grouping.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;partition-group enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> group-type=<span class="string"><span class="delimiter">&quot;</span><span class="content">CUSTOM</span><span class="delimiter">&quot;</span></span>&gt;
&lt;member-group&gt;
  &lt;<span class="type">interface</span>&gt;<span class="float">10.10</span><span class="float">.0</span>.*&lt;/<span class="class">interface</span>&gt;
  &lt;<span class="type">interface</span>&gt;<span class="float">10.10</span><span class="float">.3</span>.*&lt;/<span class="class">interface</span>&gt;
  &lt;<span class="type">interface</span>&gt;<span class="float">10.10</span><span class="float">.5</span>.*&lt;/<span class="class">interface</span>&gt;
&lt;/member-group&gt;
&lt;member-group&gt;
  &lt;<span class="type">interface</span>&gt;<span class="float">10.10</span><span class="float">.10</span><span class="float">.10</span>-<span class="integer">100</span>&lt;/<span class="class">interface</span>&gt;
  &lt;<span class="type">interface</span>&gt;<span class="float">10.10</span><span class="float">.1</span>.*&lt;/<span class="class">interface</span>&gt;
  &lt;<span class="type">interface</span>&gt;<span class="float">10.10</span><span class="float">.2</span>.*&lt;/<span class="class">interface</span>&gt;
&lt;/member-group&gt;
&lt;/partition-group&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = ...;
PartitionGroupConfig partitionGroupConfig = config.getPartitionGroupConfig();
partitionGroupConfig.setEnabled( <span class="predefined-constant">true</span> )
    .setGroupType( MemberGroupType.CUSTOM );

MemberGroupConfig memberGroupConfig = <span class="keyword">new</span> MemberGroupConfig();
memberGroupConfig.addInterface( <span class="string"><span class="delimiter">&quot;</span><span class="content">10.10.0.*</span><span class="delimiter">&quot;</span></span> )
.addInterface( <span class="string"><span class="delimiter">&quot;</span><span class="content">10.10.3.*</span><span class="delimiter">&quot;</span></span> ).addInterface(<span class="string"><span class="delimiter">&quot;</span><span class="content">10.10.5.*</span><span class="delimiter">&quot;</span></span> );

MemberGroupConfig memberGroupConfig2 = <span class="keyword">new</span> MemberGroupConfig();
memberGroupConfig2.addInterface( <span class="string"><span class="delimiter">&quot;</span><span class="content">10.10.10.10-100</span><span class="delimiter">&quot;</span></span> )
.addInterface( <span class="string"><span class="delimiter">&quot;</span><span class="content">10.10.1.*</span><span class="delimiter">&quot;</span></span>).addInterface( <span class="string"><span class="delimiter">&quot;</span><span class="content">10.10.2.*</span><span class="delimiter">&quot;</span></span> );

partitionGroupConfig.addMemberGroupConfig( memberGroupConfig );
partitionGroupConfig.addMemberGroupConfig( memberGroupConfig2 );</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
While your cluster was forming, if you configured your members to discover each other by their IP addresses, you should use the IP addresses for the <code>&lt;interface&gt;</code> element. If your members discovered each other by their hostnames, you should use the hostnames.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>3. PER_MEMBER:</strong></p>
</div>
<div class="paragraph">
<p>You can give every member its own group. Each member is a group of its own and primary and backup partitions are distributed randomly (not on the same physical member). This gives the least amount of protection and is the default configuration for a Hazelcast cluster. This grouping type provides good redundancy when Hazelcast members are on separate hosts. However, if multiple instances run on the same host, this type is not a good option.</p>
</div>
<div class="paragraph">
<p>Following are declarative and programmatic configuration snippets that show how to enable PER_MEMBER grouping.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;partition-group enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> group-type=<span class="string"><span class="delimiter">&quot;</span><span class="content">PER_MEMBER</span><span class="delimiter">&quot;</span></span> /&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = ...;
PartitionGroupConfig partitionGroupConfig = config.getPartitionGroupConfig();
partitionGroupConfig.setEnabled( <span class="predefined-constant">true</span> )
    .setGroupType( MemberGroupType.PER_MEMBER );</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>4. ZONE_AWARE:</strong></p>
</div>
<div class="paragraph">
<p>You can use ZONE_AWARE configuration with <a href="https://github.com/hazelcast/hazelcast-aws">Hazelcast AWS</a>, <a href="https://github.com/hazelcast/hazelcast-jclouds">Hazelcast jclouds</a> or <a href="https://github.com/hazelcast/hazelcast-azure">Hazelcast Azure</a> Discovery Service plugins.</p>
</div>
<div class="paragraph">
<p>As discovery services, these plugins put zone information to the Hazelcast <a href="#defining-member-attributes">member attributes</a> map during the discovery process. When ZONE_AWARE is configured as partition group type, Hazelcast creates the partition groups with respect to member attributes map entries that include zone information.That means backups are created in the other zones and each zone will be accepted as one partition group.</p>
</div>
<div class="paragraph">
<p>This is the list of supported attributes which is set by Discovery Service plugins during a Hazelcast member start-up:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hazelcast.partition.group.zone</code>: For the zones in the same area.</p>
</li>
<li>
<p><code>hazelcast.partition.group.rack</code>: For different racks in the same zone.</p>
</li>
<li>
<p><code>hazelcast.partition.group.host</code>: For a shared physical member if virtualization is used.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
hazelcast-jclouds offers rack or host information in addition to zone information based on cloud provider. In such cases, Hazelcast looks for zone, rack, and host information in the given order and create partition groups with available information*
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Following are declarative and programmatic configuration snippets that show how to enable ZONE_AWARE grouping.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;partition-group enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> group-type=<span class="string"><span class="delimiter">&quot;</span><span class="content">ZONE_AWARE</span><span class="delimiter">&quot;</span></span> /&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = ...;
PartitionGroupConfig partitionGroupConfig = config.getPartitionGroupConfig();
partitionGroupConfig.setEnabled( <span class="predefined-constant">true</span> )
    .setGroupType( MemberGroupType.ZONE_AWARE );</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>5. SPI:</strong></p>
</div>
<div class="paragraph">
<p>You can provide your own partition group implementation using the SPI configuration. To create your partition group implementation, you need to first extend the <code>DiscoveryStrategy</code> class of the discovery service plugin, override the method <code>public PartitionGroupStrategy getPartitionGroupStrategy()</code>, and return the <code>PartitionGroupStrategy</code> configuration in that overridden method.</p>
</div>
<div class="paragraph">
<p>Following is a sample code covering the implementation steps mentioned in the above paragraph:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">CustomDiscovery</span> <span class="directive">extends</span> AbstractDiscoveryStrategy {

    <span class="directive">public</span> CustomDiscovery(ILogger logger, <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Comparable</span>&gt; properties) {
        <span class="local-variable">super</span>(logger, properties);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">Iterable</span>&lt;DiscoveryNode&gt; discoverNodes() {
        <span class="predefined-type">Iterable</span>&lt;DiscoveryNode&gt; iterable = <span class="comment">//TODO implementation</span>
        <span class="keyword">return</span> iterable;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> PartitionGroupStrategy getPartitionGroupStrategy() {
        <span class="keyword">return</span> <span class="keyword">new</span> CustomPartitionGroupStrategy();
    }

    <span class="directive">private</span> <span class="type">class</span> <span class="class">CustomPartitionGroupStrategy</span> <span class="directive">implements</span> PartitionGroupStrategy {
        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="predefined-type">Iterable</span>&lt;MemberGroup&gt; getMemberGroups() {
            <span class="predefined-type">Iterable</span>&lt;MemberGroup&gt; iterable = <span class="comment">//TODO implementation</span>
            <span class="keyword">return</span> iterable;
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="logging-configuration"><a class="anchor" href="#logging-configuration"></a><a class="link" href="#logging-configuration">5.9. Logging Configuration</a></h3>
<div class="paragraph">
<p>Hazelcast has a flexible logging configuration and does not depend on any logging framework except JDK logging. It has built-in adapters for a number of logging frameworks and it also supports custom loggers by providing logging interfaces.</p>
</div>
<div class="paragraph">
<p>To use built-in adapters, set the <code>hazelcast.logging.type</code> property to one of the predefined types below.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>jdk</strong>: JDK logging (default)</p>
</li>
<li>
<p><strong>log4j</strong>: Log4j</p>
</li>
<li>
<p><strong>log4j2</strong>: Log4j2</p>
</li>
<li>
<p><strong>slf4j</strong>: Slf4j</p>
</li>
<li>
<p><strong>none</strong>: disable logging</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can set <code>hazelcast.logging.type</code> through declarative configuration, programmatic configuration, or JVM system property.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you choose to use <code>log4j</code>, <code>log4j2</code>, or <code>slf4j</code>, you should include the proper dependencies in the classpath.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Declarative Configuration</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  ....
  &lt;properties&gt;
    &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.logging.type</span><span class="delimiter">&quot;</span></span>&gt;log4j&lt;/property&gt;
    ....
  &lt;/properties&gt;
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic Configuration</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config() ;
config.setProperty( <span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.logging.type</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">log4j</span><span class="delimiter">&quot;</span></span> );</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>System Property</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using JVM parameter: <code>java -Dhazelcast.logging.type=slf4j</code></p>
</li>
<li>
<p>Using System class: <code>System.setProperty( "hazelcast.logging.type", "none" );</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the provided logging mechanisms are not satisfactory, you can implement your own using the custom logging feature. To use it, implement the <code>com.hazelcast.logging.LoggerFactory</code> and <code>com.hazelcast.logging.ILogger</code> interfaces and set the system property <code>hazelcast.logging.class</code> as your custom <code>LoggerFactory</code> class name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">-Dhazelcast.logging.class=foo.bar.MyLoggingFactory</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also listen to logging events generated by Hazelcast runtime by registering <code>LogListener`s to `LoggingService</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">LogListener listener = <span class="keyword">new</span> LogListener() {
  <span class="directive">public</span> <span class="type">void</span> log( LogEvent logEvent ) {
    <span class="comment">// do something</span>
  }
};
HazelcastInstance instance = Hazelcast.newHazelcastInstance();
LoggingService loggingService = instance.getLoggingService();
loggingService.addLogListener( <span class="predefined-type">Level</span>.INFO, listener );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Through the <code>LoggingService</code>, you can get the currently used ILogger implementation and log your own messages too.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are not using command line for configuring logging, you should be careful about Hazelcast classes. They may be defaulted to <code>jdk</code> logging before newly configured logging is read. When logging mechanism is selected, it will not change.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="other-network-configurations"><a class="anchor" href="#other-network-configurations"></a><a class="link" href="#other-network-configurations">5.10. Other Network Configurations</a></h3>
<div class="paragraph">
<p>All network related configurations are performed via the <code>network</code> element in the Hazelcast XML configuration file or the class <code>NetworkConfig</code> when using programmatic configuration. Following subsections describe the available configurations that you can perform under the <code>network</code> element.</p>
</div>
<div class="sect3">
<h4 id="public-address"><a class="anchor" href="#public-address"></a><a class="link" href="#public-address">5.10.1. Public Address</a></h4>
<div class="paragraph">
<p><code>public-address</code> overrides the public address of a member. By default, a member selects its socket address as its public address. But behind a network address translation (NAT), two endpoints (members) may not be able to see/access each other. If both members set their public addresses to their defined addresses on NAT, then that way they can communicate with each other. In this case, their public addresses are not an address of a local network interface but a virtual address defined by NAT. It is optional to set and useful when you have a private cloud. Note that, the value for this element should be given in the format <strong><code>host IP address:port number</code></strong>. See the following examples.</p>
</div>
<div class="paragraph">
<p><strong>Declarative:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;network&gt;
    &lt;<span class="directive">public</span>-address&gt;<span class="float">11.22</span><span class="float">.33</span><span class="float">.44</span>:<span class="integer">5555</span>&lt;/<span class="directive">public</span>-address&gt;
&lt;/network&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config();
config.getNetworkConfig()
    .setPublicAddress( <span class="string"><span class="delimiter">&quot;</span><span class="content">11.22.33.44:5555</span><span class="delimiter">&quot;</span></span> );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="port"><a class="anchor" href="#port"></a><a class="link" href="#port">5.10.2. Port</a></h4>
<div class="paragraph">
<p>You can specify the ports that Hazelcast will use to communicate between cluster members. Its default value is <code>5701</code>. The following are example configurations.</p>
</div>
<div class="paragraph">
<p><strong>Declarative:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;network&gt;
  &lt;port port-count=<span class="string"><span class="delimiter">&quot;</span><span class="content">20</span><span class="delimiter">&quot;</span></span> auto-increment=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">5701</span>&lt;/port&gt;
&lt;/network&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config();
config.getNetworkConfig().setPort( <span class="integer">5701</span> )
    .setPortAutoIncrement( <span class="predefined-constant">true</span> ).setPortCount( <span class="integer">20</span> );</code></pre>
</div>
</div>
<div class="paragraph">
<p>According to the above example, Hazelcast will try to find free ports between 5701 and 5720.</p>
</div>
<div class="paragraph">
<p><code>port</code> has the following attributes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>port-count</code>: By default, Hazelcast will try 100 ports to bind. Meaning that, if you set the value of port as 5701, as members are joining to the cluster, Hazelcast tries to find ports between 5701 and 5801. You can choose to change the port count in the cases like having large instances on a single machine or willing to have only a few ports to be assigned. The parameter <code>port-count</code> is used for this purpose, whose default value is 100.</p>
</li>
<li>
<p><code>auto-increment</code>:  In some cases you may want to choose to use only one port. In that case, you can disable the auto-increment feature of <code>port</code> by setting <code>auto-increment</code> to <code>false</code>. The <code>port-count</code> attribute is not used when auto-increment feature is disabled.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="outbound-ports"><a class="anchor" href="#outbound-ports"></a><a class="link" href="#outbound-ports">5.10.3. Outbound Ports</a></h4>
<div class="paragraph">
<p>By default, Hazelcast lets the system pick up an ephemeral port during socket bind operation. But security policies/firewalls may require you to restrict outbound ports to be used by Hazelcast-enabled applications. To fulfill this requirement, you can configure Hazelcast to use only defined outbound ports. The following are example configurations.</p>
</div>
<div class="paragraph">
<p><strong>Declarative:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;network&gt;
  &lt;outbound-ports&gt;
    &lt;!-- ports between <span class="integer">33000</span> and <span class="integer">35000</span> --&gt;
    &lt;ports&gt;<span class="integer">33000</span>-<span class="integer">35000</span>&lt;/ports&gt;
    &lt;!-- comma separated ports --&gt;
    &lt;ports&gt;<span class="integer">37000</span>,<span class="integer">37001</span>,<span class="integer">37002</span>,<span class="integer">37003</span>&lt;/ports&gt;
    &lt;ports&gt;<span class="integer">38000</span>,<span class="integer">38500</span>-<span class="integer">38600</span>&lt;/ports&gt;
  &lt;/outbound-ports&gt;
&lt;/network&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">...
NetworkConfig networkConfig = config.getNetworkConfig();
<span class="comment">// ports between 35000 and 35100</span>
networkConfig.addOutboundPortDefinition(<span class="string"><span class="delimiter">&quot;</span><span class="content">35000-35100</span><span class="delimiter">&quot;</span></span>);
<span class="comment">// comma separated ports</span>
networkConfig.addOutboundPortDefinition(<span class="string"><span class="delimiter">&quot;</span><span class="content">36001, 36002, 36003</span><span class="delimiter">&quot;</span></span>);
networkConfig.addOutboundPort(<span class="integer">37000</span>);
networkConfig.addOutboundPort(<span class="integer">37001</span>);
...</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can use port ranges and/or comma separated ports.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As shown in the programmatic configuration, you use the method <code>addOutboundPort</code> to add only one port. If you need to add a group of ports, then use the method <code>addOutboundPortDefinition</code>.</p>
</div>
<div class="paragraph">
<p>In the declarative configuration, the element <code>ports</code> can be used for both single and multiple port definitions. When you set this element to  <code>0</code> or  <code>*</code>, your operating system (not Hazelcast) will select a free port from the ephemeral range.</p>
</div>
</div>
<div class="sect3">
<h4 id="reuse-address"><a class="anchor" href="#reuse-address"></a><a class="link" href="#reuse-address">5.10.4. Reuse Address</a></h4>
<div class="paragraph">
<p>When you shutdown a cluster member, the server socket port will be in the <code>TIME_WAIT</code> state for the next couple of minutes. If you start the member right after shutting it down, you may not be able to bind it to the same port because it is in the <code>TIME_WAIT</code> state. If you set the <code>reuse-address</code> element to <code>true</code>, the <code>TIME_WAIT</code> state is ignored and you can bind the member to the same port again.</p>
</div>
<div class="paragraph">
<p>The following are example configurations.</p>
</div>
<div class="paragraph">
<p><strong>Declarative:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;network&gt;
  &lt;reuse-address&gt;<span class="predefined-constant">true</span>&lt;/reuse-address&gt;
&lt;/network&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">...
NetworkConfig networkConfig = config.getNetworkConfig();

networkConfig.setReuseAddress( <span class="predefined-constant">true</span> );
...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="join"><a class="anchor" href="#join"></a><a class="link" href="#join">5.10.5. Join</a></h4>
<div class="paragraph">
<p>The <code>join</code> configuration element is used to discover Hazelcast members and enable them to form a cluster. Hazelcast provides multicast, TCP/IP, EC2, and jclouds&reg; discovery mechanisms. These mechanisms are explained the <a href="#discovery-mechanisms">Discovery Mechanisms section</a>. This section describes all the sub-elements and attributes of <code>join</code> element. The following are example configurations.</p>
</div>
<div class="paragraph">
<p><strong>Declarative:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;network&gt;
     &lt;join&gt;
         &lt;multicast enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>&gt;
             &lt;multicast-group&gt;<span class="float">224.2</span><span class="float">.2</span><span class="float">.3</span>&lt;/multicast-group&gt;
             &lt;multicast-port&gt;<span class="integer">54327</span>&lt;/multicast-port&gt;
             &lt;multicast-time-to-live&gt;<span class="integer">32</span>&lt;/multicast-time-to-live&gt;
             &lt;multicast-timeout-seconds&gt;<span class="integer">2</span>&lt;/multicast-timeout-seconds&gt;
             &lt;trusted-interfaces&gt;
                &lt;<span class="type">interface</span>&gt;<span class="float">192.168</span><span class="float">.1</span><span class="float">.102</span>&lt;/<span class="class">interface</span>&gt;
             &lt;/trusted-interfaces&gt;
         &lt;/multicast&gt;
         &lt;tcp-ip enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>&gt;
             &lt;required-member&gt;<span class="float">192.168</span><span class="float">.1</span><span class="float">.104</span>&lt;/required-member&gt;
             &lt;member&gt;<span class="float">192.168</span><span class="float">.1</span><span class="float">.104</span>&lt;/member&gt;
             &lt;members&gt;<span class="float">192.168</span><span class="float">.1</span><span class="float">.105</span>,<span class="float">192.168</span><span class="float">.1</span><span class="float">.106</span>&lt;/members&gt;
         &lt;/tcp-ip&gt;
         &lt;aws enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>&gt;
             &lt;access-key&gt;my-access-key&lt;/access-key&gt;
             &lt;secret-key&gt;my-secret-key&lt;/secret-key&gt;
             &lt;region&gt;us-west-<span class="integer">1</span>&lt;/region&gt;
             &lt;host-header&gt;ec2.amazonaws.com&lt;/host-header&gt;
             &lt;security-group-name&gt;hazelcast-sg&lt;/security-group-name&gt;
             &lt;tag-key&gt;type&lt;/tag-key&gt;
             &lt;tag-value&gt;hz-members&lt;/tag-value&gt;
         &lt;/aws&gt;
         &lt;discovery-strategies&gt;
           &lt;discovery-strategy ... /&gt;
         &lt;/discovery-strategies&gt;
     &lt;/join&gt;
&lt;/network&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config();
NetworkConfig network = config.getNetworkConfig();
JoinConfig join = network.getJoin();
join.getMulticastConfig().setEnabled( <span class="predefined-constant">false</span> )
            .addTrustedInterface( <span class="string"><span class="delimiter">&quot;</span><span class="content">192.168.1.102</span><span class="delimiter">&quot;</span></span> );
join.getTcpIpConfig().addMember( <span class="string"><span class="delimiter">&quot;</span><span class="content">10.45.67.32</span><span class="delimiter">&quot;</span></span> ).addMember( <span class="string"><span class="delimiter">&quot;</span><span class="content">10.45.67.100</span><span class="delimiter">&quot;</span></span> )
            .setRequiredMember( <span class="string"><span class="delimiter">&quot;</span><span class="content">192.168.10.100</span><span class="delimiter">&quot;</span></span> ).setEnabled( <span class="predefined-constant">true</span> );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>join</code> element has the following sub-elements and attributes.</p>
</div>
<div class="sect4">
<h5 id="multicase-element"><a class="anchor" href="#multicase-element"></a><a class="link" href="#multicase-element">multicast element</a></h5>
<div class="paragraph">
<p>The <code>multicast</code> element includes parameters to fine tune the multicast join mechanism.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code>: Specifies whether the multicast discovery is enabled or not, <code>true</code> or <code>false</code>.</p>
</li>
<li>
<p><code>multicast-group</code>: The multicast group IP address. Specify it when you want to create clusters within the same network. Values can be between 224.0.0.0 and 239.255.255.255. Default value is 224.2.2.3.</p>
</li>
<li>
<p><code>multicast-port</code>: The multicast socket port that the Hazelcast member listens to and sends discovery messages through. Default value is 54327.</p>
</li>
<li>
<p><code>multicast-time-to-live</code>: Time-to-live value for multicast packets sent out to control the scope of multicasts. See more information <a href="http://www.tldp.org/HOWTO/Multicast-HOWTO-2.html">here</a>.</p>
</li>
<li>
<p><code>multicast-timeout-seconds</code>: Only when the members are starting up, this timeout (in seconds) specifies the period during which a member waits for a multicast response from another member. For example, if you set it as 60 seconds, each member will wait for 60 seconds until a leader member is selected. Its default value is 2 seconds.</p>
</li>
<li>
<p><code>trusted-interfaces</code>: Includes IP addresses of trusted members. When a member wants to join to the cluster, its join request will be rejected if it is not a trusted member. You can give an IP addresses range using the wildcard (*) on the last digit of IP address, e.g., 192.168.1.\* or 192.168.1.100-110.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="tcp-ip-element"><a class="anchor" href="#tcp-ip-element"></a><a class="link" href="#tcp-ip-element">tcp-ip element</a></h5>
<div class="paragraph">
<p>The <code>tcp-ip</code> element includes parameters to fine tune the TCP/IP join mechanism.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code>: Specifies whether the TCP/IP discovery is enabled or not. Values can be <code>true</code> or <code>false</code>.</p>
</li>
<li>
<p><code>required-member</code>: IP address of the required member. Cluster will only formed if the member with this IP address is found.</p>
</li>
<li>
<p><code>member</code>: IP address(es) of one or more well known members. Once members are connected to these well known ones, all member addresses will be communicated with each other. You can also give comma separated IP addresses using the <code>members</code> element.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>tcp-ip</code> element also accepts the <code>interface</code> parameter. Please refer to the <a href="#interfaces">Interfaces element description</a>.*
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>connection-timeout-seconds</code>: Defines the connection timeout. This is the maximum amount of time Hazelcast is going to try to connect to a well known member before giving up. Setting it to a too low value could mean that a member is not able to connect to a cluster. Setting it to a too high value means that member startup could slow down because of longer timeouts, for example when a well known member is not up. Increasing this value is recommended if you have many IPs listed and the members cannot properly build up the cluster. Its default value is 5.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aws-element"><a class="anchor" href="#aws-element"></a><a class="link" href="#aws-element">aws element</a></h5>
<div class="paragraph">
<p>The <code>aws</code> element includes parameters to allow the members to form a cluster on the Amazon EC2 environment.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code>: Specifies whether the EC2 discovery is enabled or not, <code>true</code> or <code>false</code>.</p>
</li>
<li>
<p><code>access-key</code>, <code>secret-key</code>: Access and secret keys of your account on EC2.</p>
</li>
<li>
<p><code>region</code>: The region where your members are running. Default value is <code>us-east-1</code>. You need to specify this if the region is other than the default one.</p>
</li>
<li>
<p><code>host-header</code>: The URL that is the entry point for a web service. It is optional.</p>
</li>
<li>
<p><code>security-group-name</code>: Name of the security group you specified at the EC2 management console. It is used to narrow the Hazelcast members to be within this group. It is optional.</p>
</li>
<li>
<p><code>tag-key</code>, <code>tag-value</code>: To narrow the members in the cloud down to only Hazelcast members, you can set these parameters as the ones you specified in the EC2 console. They are optional.</p>
</li>
<li>
<p><code>connection-timeout-seconds</code>: The maximum amount of time Hazelcast will try to connect to a well known member before giving up. Setting this value too low could mean that a member is not able to connect to a cluster. Setting the value too high means that member startup could slow down because of longer timeouts (for example, when a well known member is not up). Increasing this value is recommended if you have many IPs listed and the members cannot properly build up the cluster. Its default value is 5.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are using a cloud provider other than AWS, you can use the programmatic configuration to specify a TCP/IP cluster. The members will need to be retrieved from that provider, e.g., jclouds.</p>
</div>
</div>
<div class="sect4">
<h5 id="discovery-strategies-element"><a class="anchor" href="#discovery-strategies-element"></a><a class="link" href="#discovery-strategies-element">discovery-strategies element</a></h5>
<div class="paragraph">
<p>The <code>discovery-strategies</code> element configures internal or external discovery strategies based on the Hazelcast Discovery SPI. For further information, please refer to the <a href="#discovery-spi">Discovery SPI section</a> and the vendor documentation of the used discovery strategy.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="awsclient-configuration"><a class="anchor" href="#awsclient-configuration"></a><a class="link" href="#awsclient-configuration">5.10.6. AWSClient Configuration</a></h4>
<div class="paragraph">
<p>To make sure EC2 instances are found correctly, you can use the <code>AWSClient</code> class. It determines the private IP addresses of EC2 instances to be connected. Give the <code>AWSClient</code> class the values for the parameters that you specified in the <code>aws</code> element, as shown below. You will see whether your EC2 instances are found.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main( <span class="predefined-type">String</span><span class="type">[]</span> args )<span class="directive">throws</span> <span class="exception">Exception</span>{
  AwsConfig config = <span class="keyword">new</span> AwsConfig();
  config.setSecretKey( ... ) ;
  config.setSecretKey( ... );
  config.setRegion( ... );
  config.setSecurityGroupName( ... );
  config.setTagKey( ... );
  config.setTagValue( ... );
  config.setEnabled( <span class="predefined-constant">true</span> );
  AWSClient client = <span class="keyword">new</span> AWSClient( config );
  <span class="predefined-type">Collection</span>&lt;<span class="predefined-type">String</span>&gt; ipAddresses = client.getPrivateIpAddresses();
  <span class="predefined-type">System</span>.out.println( <span class="string"><span class="delimiter">&quot;</span><span class="content">addresses found:</span><span class="delimiter">&quot;</span></span> + ipAddresses );
  <span class="keyword">for</span> ( <span class="predefined-type">String</span> ip: ipAddresses ) {
    <span class="predefined-type">System</span>.out.println( ip );
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="interfaces"><a class="anchor" href="#interfaces"></a><a class="link" href="#interfaces">5.10.7. Interfaces</a></h4>
<div class="paragraph">
<p>You can specify which network interfaces that Hazelcast should use. Servers mostly have more than one network interface, so you may want to list the valid IPs. Range characters ('*' and '-') can be used for simplicity. For instance, 10.3.10.\* refers to IPs between 10.3.10.0 and 10.3.10.255. Interface 10.3.10.4-18 refers to IPs between 10.3.10.4 and 10.3.10.18 (4 and 18 included). If network interface configuration is enabled (it is disabled by default) and if Hazelcast cannot find a matching interface, then it will print a message on the console and will not start on that member.</p>
</div>
<div class="paragraph">
<p>The following are example configurations.</p>
</div>
<div class="paragraph">
<p><strong>Declarative:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;hazelcast&gt;
  ...
  &lt;network&gt;
    ...
    &lt;interfaces enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>&gt;
      &lt;<span class="type">interface</span>&gt;<span class="float">10.3</span><span class="float">.16</span>.*&lt;/<span class="class">interface</span>&gt;
      &lt;<span class="type">interface</span>&gt;<span class="float">10.3</span><span class="float">.10</span><span class="float">.4</span>-<span class="integer">18</span>&lt;/<span class="class">interface</span>&gt;
      &lt;<span class="type">interface</span>&gt;<span class="float">192.168</span><span class="float">.1</span><span class="float">.3</span>&lt;/<span class="class">interface</span>&gt;
    &lt;/interfaces&gt;
  &lt;/network&gt;
  ...
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config();
NetworkConfig network = config.getNetworkConfig();
InterfacesConfig interfaceConfig = network.getInterfaces();
interfaceConfig.setEnabled( <span class="predefined-constant">true</span> )
            .addInterface( <span class="string"><span class="delimiter">&quot;</span><span class="content">192.168.1.3</span><span class="delimiter">&quot;</span></span> );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ipv6-support"><a class="anchor" href="#ipv6-support"></a><a class="link" href="#ipv6-support">5.10.8. IPv6 Support</a></h4>
<div class="paragraph">
<p>Hazelcast supports IPv6 addresses seamlessly (This support is switched off by default, please see the note at the end of this section).</p>
</div>
<div class="paragraph">
<p>All you need is to define IPv6 addresses or interfaces in the network configuration. The only current limitation is that you cannot define wildcard IPv6 addresses in the TCP/IP join configuration (<code>tcp-ip</code> element). <a href="#interfaces">Interfaces</a> configuration does not have this limitation, you can configure wildcard IPv6 interfaces in the same way as IPv4 interfaces.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;hazelcast&gt;
  ...
  &lt;network&gt;
    &lt;port auto-increment=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">5701</span>&lt;/port&gt;
    &lt;join&gt;
      &lt;multicast enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>&gt;
        &lt;multicast-group&gt;FF02:<span class="integer">0</span>:<span class="integer">0</span>:<span class="integer">0</span>:<span class="integer">0</span>:<span class="integer">0</span>:<span class="integer">0</span>:<span class="integer">1</span>&lt;/multicast-group&gt;
        &lt;multicast-port&gt;<span class="integer">54327</span>&lt;/multicast-port&gt;
      &lt;/multicast&gt;
      &lt;tcp-ip enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>&gt;
        &lt;member&gt;[fe80::<span class="integer">223</span>:<span class="integer">6</span>cff:fe93:<span class="integer">7</span>c7e]:<span class="integer">5701</span>&lt;/member&gt;
        &lt;<span class="type">interface</span>&gt;<span class="float">192.168</span><span class="float">.1</span><span class="float">.0</span>-<span class="integer">7</span>&lt;/<span class="class">interface</span>&gt;
        &lt;<span class="type">interface</span>&gt;<span class="float">192.168</span><span class="float">.1</span>.*&lt;/<span class="class">interface</span>&gt;
        &lt;<span class="type">interface</span>&gt;<span class="class">fe80</span>:<span class="integer">0</span>:<span class="integer">0</span>:<span class="integer">0</span>:<span class="integer">45</span>c5:<span class="integer">47</span>ee:fe15:<span class="integer">493</span>a&lt;/<span class="type">interface</span>&gt;
      &lt;/<span class="class">tcp</span>-ip&gt;
    &lt;/join&gt;
    &lt;interfaces enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>&gt;
      &lt;<span class="type">interface</span>&gt;<span class="float">10.3</span><span class="float">.16</span>.*&lt;/<span class="class">interface</span>&gt;
      &lt;<span class="type">interface</span>&gt;<span class="float">10.3</span><span class="float">.10</span><span class="float">.4</span>-<span class="integer">18</span>&lt;/<span class="class">interface</span>&gt;
      &lt;<span class="type">interface</span>&gt;<span class="class">fe80</span>:<span class="integer">0</span>:<span class="integer">0</span>:<span class="integer">0</span>:<span class="integer">45</span>c5:<span class="integer">47</span>ee:fe15:*&lt;/<span class="type">interface</span>&gt;
      &lt;<span class="class">interface</span>&gt;fe80::<span class="integer">223</span>:<span class="integer">6</span>cff:fe93:<span class="integer">0</span>-<span class="integer">5555</span>&lt;/<span class="type">interface</span>&gt;
    &lt;/<span class="class">interfaces</span>&gt;
    ...
  &lt;/network&gt;
  ...
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>JVM has two system properties for setting the preferred protocol stack (IPv4 or IPv6) as well as the preferred address family types (inet4 or inet6). On a dual stack machine, IPv6 stack is preferred by default, you can change this through the <code>java.net.preferIPv4Stack=&lt;true|false&gt;</code> system property. When querying name services, JVM prefers IPv4 addresses over IPv6 addresses and will return an IPv4 address if possible. You can change this through <code>java.net.preferIPv6Addresses=&lt;true|false&gt;</code> system property.</p>
</div>
<div class="paragraph">
<p>Also see additional <a href="http://docs.oracle.com/javase/1.5.0/docs/guide/net/ipv6_guide/">details on IPv6 support in Java</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
IPv6 support has been switched off by default, since some platforms have issues using the IPv6 stack. Some other platforms such as Amazon AWS have no support at all. To enable IPv6 support, just set configuration property <code>hazelcast.prefer.ipv4.stack</code> to <strong>false</strong>. Please refer to the <a href="#system-properties">System Properties section</a> for details.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="member-address-provides-spi"><a class="anchor" href="#member-address-provides-spi"></a><a class="link" href="#member-address-provides-spi">5.10.9. Member Address Provider SPI</a></h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This SPI is not intended to provide addresses of other cluster members with which the Hazelcast instance will form a cluster. To do that, refer to the other network configuration sections above.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By default, Hazelcast chooses the public and bind address. You can influence on the choice by defining a <code>public-address</code> in the configuration or by using other properties mentioned above. In some cases, though, these properties are not enough and the default address picking strategy will choose wrong addresses. This may be the case when deploying Hazelcast in some cloud environments, such as AWS, when using Docker or when the instance is deployed behind a NAT and the <code>public-address</code> property is not enough (please see the <a href="#public-address">Public Address section</a>).</p>
</div>
<div class="paragraph">
<p>In these cases, it is possible to configure the bind and public address in a more advanced way. You can provide an implementation of the <code>com.hazelcast.spi.MemberAddressProvider</code> interface which will provide the bind and public address. The implementation may then choose these addresses in any way - it may read from a system property or file or even invoke a web service to retrieve the public and private address.</p>
</div>
<div class="paragraph">
<p>The details of the implementation depend heavily on the environment in which Hazelcast is deployed. As such, we will demonstrate how to configure Hazelcast to use a simplified custom member address provider SPI implementation. An example of an implementation is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="type">class</span> <span class="class">SimpleMemberAddressProvider</span> <span class="directive">implements</span> MemberAddressProvider {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">InetSocketAddress</span> getBindAddress() {
        <span class="comment">// determine the address using some configuration, calling an API, ...</span>
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="predefined-type">InetSocketAddress</span>(hostname, port);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">InetSocketAddress</span> getPublicAddress() {
        <span class="comment">// determine the address using some configuration, calling an API, ...</span>
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="predefined-type">InetSocketAddress</span>(hostname, port);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that if the bind address port is <code>0</code> then it will use a port as configured in the Hazelcast network configuration (see the <a href="#port">Port section</a>). If the public address port is set to <code>0</code> then it will broadcast the same port that it is bound to. If you wish to bind to any local interface, you may return <code>new InetSocketAddress((InetAddress) null, port)</code> from the <code>getBindAddress()</code> address.</p>
</div>
<div class="paragraph">
<p>The following configuration examples contain properties that will be provided to the constructor of the provided class. If you do not provide any properties, the class may have either a no-arg constructor or a constructor accepting a single <code>java.util.Properties</code> instance. On the other hand, if you do provide properties in the configuration, the class must have a constructor accepting a single <code>java.util.Properties</code> instance.</p>
</div>
<div class="paragraph">
<p><strong>Declarative:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;network&gt;
     &lt;member-address-provider enabled=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>&gt;
         &lt;<span class="type">class</span>-<span class="class">name</span>&gt;SimpleMemberAddressProvider&lt;/<span class="type">class</span>-<span class="class">name</span>&gt;
         &lt;properties&gt;
             &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">prop1</span><span class="delimiter">&quot;</span></span>&gt;prop1-value&lt;/property&gt;
             &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">prop2</span><span class="delimiter">&quot;</span></span>&gt;prop2-value&lt;/property&gt;
         &lt;/properties&gt;
     &lt;/member-address-provider&gt;
     &lt;!-- other network configuration --&gt;
&lt;/network&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Programmatic:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = <span class="keyword">new</span> Config();
MemberAddressProviderConfig memberAddressProviderConfig = config.getNetworkConfig().getMemberAddressProviderConfig();
memberAddressProviderConfig
      .setEnabled(<span class="predefined-constant">true</span>)
      .setClassName(MemberAddressProviderWithStaticProperties.class.getName());
<span class="predefined-type">Properties</span> properties = memberAddressProviderConfig.getProperties();
properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">prop1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">prop1-value</span><span class="delimiter">&quot;</span></span>);
properties.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">prop2</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">prop2-value</span><span class="delimiter">&quot;</span></span>);

config.getNetworkConfig().getJoin().getMulticastConfig().setEnabled(<span class="predefined-constant">false</span>);

<span class="comment">// perform other configuration</span>

Hazelcast.newHazelcastInstance(config);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="failure-detector-configuration"><a class="anchor" href="#failure-detector-configuration"></a><a class="link" href="#failure-detector-configuration">5.11. Failure Detector Configuration</a></h3>
<div class="paragraph">
<p>A failure detector is responsible to determine if a member in the cluster is unreachable or crashed. The most important problem in failure detection is to distinguish whether a member is still alive but slow or has crashed. But according to the famous <a href="http://dl.acm.org/citation.cfm?doid=3149.214121">FLP result</a>, it is impossible to distinguish a crashed member from a slow one in an asynchronous system. A workaround to this limitation is to use unreliable failure detectors. An unreliable failure detector allows a member to suspect that others have failed, usually based on liveness criteria but it can make mistakes to a certain degree.</p>
</div>
<div class="paragraph">
<p>Hazelcast has two built-in failure detectors; Deadline Failure Detector and Phi Accrual Failure Detector.</p>
</div>
<div class="paragraph">
<p>Since 3.9.1, Hazelcast provides yet another failure detector, Ping Failure Detector, that, if enabled, works in parallel with the above ones, but identifies
failures on OSI Layer 3 (Network Layer). This detector is by default disabled.</p>
</div>
<div class="paragraph">
<p>Note that, Hazelcast also offers failure detectors for its Java client. Please refer to the <a href="#client-failure-detectors">Client Failure Detectors section</a> for more information.</p>
</div>
<div class="sect3">
<h4 id="deadline-failre-detector"><a class="anchor" href="#deadline-failre-detector"></a><a class="link" href="#deadline-failre-detector">5.11.1. Deadline Failure Detector</a></h4>
<div class="paragraph">
<p><em>Deadline Failure Detector</em> uses an absolute timeout for missing/lost heartbeats. After timeout, a member is considered as crashed/unavailable and marked as suspected.</p>
</div>
<div class="paragraph">
<p><em>Deadline Failure Detector</em> has two configuration properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hazelcast.heartbeat.interval.seconds</code>: This is the interval at which member heartbeat messages are sent to each other.</p>
</li>
<li>
<p><code>hazelcast.max.no.heartbeat.seconds</code>: This is the timeout which defines when a cluster member is suspected because it has not sent any heartbeats.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To use <em>Deadline Failure Detector</em> configuration property <code>hazelcast.heartbeat.failuredetector.type</code> should be set to <code>"deadline"</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;hazelcast&gt;
    [...]
        &lt;properties&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.failuredetector.type</span><span class="delimiter">&quot;</span></span>&gt;deadline&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.interval.seconds</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">5</span>&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.max.no.heartbeat.seconds</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">120</span>&lt;/property&gt;
        [...]
    &lt;/properties&gt;
    [...]
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = ...;
config.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.failuredetector.type</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">deadline</span><span class="delimiter">&quot;</span></span>);
config.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.interval.seconds</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span>);
config.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.max.no.heartbeat.seconds</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">120</span><span class="delimiter">&quot;</span></span>);
[...]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em>Deadline Failure Detector</em> is the default failure detector in Hazelcast.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="phi-accrual-failure-detector"><a class="anchor" href="#phi-accrual-failure-detector"></a><a class="link" href="#phi-accrual-failure-detector">5.11.2. Phi Accrual Failure Detector</a></h4>
<div class="paragraph">
<p>This is the failure detector based on <a href="https://www.computer.org/csdl/proceedings/srds/2004/2239/00/22390066-abs.html">The Phi Accrual Failure Detector' by Hayashibara et al.</a></p>
</div>
<div class="paragraph">
<p>Phi Accrual Failure Detector keeps track of the intervals between heartbeats in a sliding window of time and measures the mean and variance of these samples and calculates a value of suspicion level (Phi). The value of phi will increase when the period since the last heartbeat gets longer. If the network becomes slow or unreliable, the resulting mean and variance will increase, there will need to be a longer period for which no heartbeat is received before the member is suspected. </p>
</div>
<div class="paragraph">
<p><code>hazelcast.heartbeat.interval.seconds</code> and <code>hazelcast.max.no.heartbeat.seconds</code> properties will still be used as period of heartbeat messages and deadline of heartbeat messages. Since <em>Phi Accrual Failure Detector</em> is adaptive to network conditions, a much lower <code>hazelcast.max.no.heartbeat.seconds</code> can be defined than <em>Deadline Failure Detector</em>'s timeout.</p>
</div>
<div class="paragraph">
<p>Additional to above two properties, <em>Phi Accrual Failure Detector</em> has three more configuration properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hazelcast.heartbeat.phiaccrual.failuredetector.threshold</code>: This is the phi threshold for suspicion. After calculated phi exceeds this threshold, a member is considered as unreachable and marked as suspected. A low threshold allows to detect member crashes/failures faster but can generate more mistakes and cause wrong member suspicions. A high threshold generates fewer mistakes but is slower to detect actual crashes/failures.</p>
<div class="paragraph">
<p><code>phi = 1</code> means likeliness that we will make a mistake is about <code>10%</code>. The likeliness is about <code>1%</code> with <code>phi = 2</code>, <code>0.1%</code> with <code>phi = 3</code>, and so on. Default phi threshold is 10.</p>
</div>
</li>
<li>
<p><code>hazelcast.heartbeat.phiaccrual.failuredetector.sample.size</code>: Number of samples to keep for history. Default value is 200.</p>
</li>
<li>
<p><code>hazelcast.heartbeat.phiaccrual.failuredetector.min.std.dev.millis</code>: Minimum standard deviation to use for the normal distribution used when calculating phi. Too low standard deviation might result in too much sensitivity.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To use <em>Phi Accrual Failure Detector</em>, configuration property <code>hazelcast.heartbeat.failuredetector.type</code> should be set to <code>"phi-accrual"</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;hazelcast&gt;
    [...]
        &lt;properties&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.failuredetector.type</span><span class="delimiter">&quot;</span></span>&gt;phi-accrual&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.interval.seconds</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">1</span>&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.max.no.heartbeat.seconds</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">60</span>&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.phiaccrual.failuredetector.threshold</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">10</span>&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.phiaccrual.failuredetector.sample.size</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">200</span>&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.phiaccrual.failuredetector.min.std.dev.millis</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">100</span>&lt;/property&gt;
        [...]
    &lt;/properties&gt;
    [...]
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config config = ...;
config.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.failuredetector.type</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">phi-accrual</span><span class="delimiter">&quot;</span></span>);
config.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.interval.seconds</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>);
config.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.max.no.heartbeat.seconds</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">60</span><span class="delimiter">&quot;</span></span>);
config.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.phiaccrual.failuredetector.threshold</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">10</span><span class="delimiter">&quot;</span></span>);
config.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.phiaccrual.failuredetector.sample.size</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">200</span><span class="delimiter">&quot;</span></span>);
config.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.heartbeat.phiaccrual.failuredetector.min.std.dev.millis</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">100</span><span class="delimiter">&quot;</span></span>);
[...]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ping-failure-detector"><a class="anchor" href="#ping-failure-detector"></a><a class="link" href="#ping-failure-detector">5.11.3. Ping Failure Detector</a></h4>
<div class="paragraph">
<p>The Ping Failure Detector may be configured in addition to one of Deadline and Phi Accual Failure Detectors. It operates at Layer 3 of the OSI protocol, and provides much quicker and more deterministic detection of hardware and other lower level events. This detector may be configured to perform an extra check after a member is suspected by one of the other detectors, or it can work in parallel, which is the default. This way hardware and network level issues will be detected more quickly.</p>
</div>
<div class="paragraph">
<p>This failure detector is based on <code>InetAddress.isReachable()</code>.
When the JVM process has enough permissions to create RAW sockets, the implementation will choose to rely on ICMP Echo requests. This is preferred.</p>
</div>
<div class="paragraph">
<p>If there are not enough permissions, it can be configured to fallback on attempting a TCP Echo on port 7. In the latter case, both a successful connection or an explicit rejection will be treated as "Host is Reachable". Or, it can be forced to use only RAW sockets. This is not preferred as each call creates a heavy weight socket and moreover the Echo service is typically disabled.</p>
</div>
<div class="paragraph">
<p>For the Ping Failure Detector to rely <strong>only</strong> on ICMP Echo requests, there are some criteria that need to be met.</p>
</div>
<div class="sect4">
<h5 id="requirements-and-linuxunix-configuration"><a class="anchor" href="#requirements-and-linuxunix-configuration"></a><a class="link" href="#requirements-and-linuxunix-configuration">Requirements and Linux/Unix Configuration</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Supported OS: as of Java 1.8 only Linux/Unix environments are supported</strong>. This detector relies on ICMP, i.e., the protocol behind the <code>ping</code> command. It tries to issue the ping attempts periodically, and their responses are used to determine the reachability of the remote member. However, you cannot simply create an ICMP Echo Request because these type of packets do not rely on any of the preexisting transport protocols such as TCP. In order to create such a request, you must have the privileges to create RAW sockets (please see <a href="https://linux.die.net/man/7/raw">https://linux.die.net/man/7/raw</a>). Most operating systems allow this to the root users, however Unix based ones are more flexible and allow the use of custom privileges per process
instead of requiring root access. Therefore, this detector is supported only on Linux.</p>
</li>
<li>
<p><strong>The Java executable must have the <code>cap_net_raw</code> capability.</strong> As described in the above requirement, on Linux, you have the ability to define extra capabilities to a single process, which would allow the process to interact with the RAW sockets. This interaction is achieved via the capability <code>cap_net_raw</code> (please see <a href="https://linux.die.net/man/7/capabilities">https://linux.die.net/man/7/capabilities</a>). To enable this capability run the following command:</p>
<div class="paragraph">
<p><code>sudo setcap cap_net_raw=+ep &lt;JDK_HOME&gt;/jre/bin/java</code></p>
</div>
</li>
<li>
<p><strong>When running with custom capabilities, the dynamic linker on Linux will reject loading libs from untrusted paths.</strong> Since you have now <code>cap_net_raw</code> as a custom capability for a process, it becomes suspicious to the dynamic linker and it will throw an error: <code>java: error while loading shared libraries: libjli.so: cannot open shared object file: No such file or directory</code></p>
<div class="ulist">
<ul>
<li>
<p>To overcome this rejection, the <code>&lt;JDK_HOME&gt;/jre/lib/amd64/jli/</code> path needs to be added in the <code>ld.conf</code>. Run the following command to do this: <code>echo "&lt;JDK_HOME&gt;/jre/lib/amd64/jli/" &gt;&gt; /etc/ld.so.conf.d/java.conf &amp;&amp; sudo ldconfig</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>ICMP Echo Requests must not be blocked by the receiving hosts.</strong> <code>/proc/sys/net/ipv4/icmp_echo_ignore_all</code> set to <code>0</code>. Run the following command:</p>
<div class="paragraph">
<p><code>echo 0 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_all</code></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If any of the above criteria isn&#8217;t met, then the <code>isReachable</code> will always fallback on TCP Echo attempts on port 7.</p>
</div>
<div class="paragraph">
<p>To be able to use the Ping Failure Detector, please add the following properties in your Hazelcast declarative configuration file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&lt;hazelcast&gt;
    [...]
        &lt;properties&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.icmp.enabled</span><span class="delimiter">&quot;</span></span>&gt;<span class="predefined-constant">true</span>&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.icmp.parallel.mode</span><span class="delimiter">&quot;</span></span>&gt;<span class="predefined-constant">true</span>&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.icmp.timeout</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">1000</span>&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.icmp.max.attempts</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">3</span>&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.icmp.interval</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">1000</span>&lt;/property&gt;
        &lt;property name=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.icmp.ttl</span><span class="delimiter">&quot;</span></span>&gt;<span class="integer">0</span>&lt;/property&gt;
        [...]
    &lt;/properties&gt;
    [...]
&lt;/hazelcast&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hazelcast.icmp.enabled</code> (default false) - Enables legacy ICMP detection mode, works cooperatively with the existing failure detector, and only kicks-in after a pre-defined period has passed with no heartbeats from a member.</p>
</li>
<li>
<p><code>hazelcast.icmp.parallel.mode</code> (default true) - Enabling the parallel ping detector, works separately from the other detectors.</p>
</li>
<li>
<p><code>hazelcast.icmp.timeout</code> (default 1000) - Number of milliseconds until a ping attempt is considered failed if there was no reply.</p>
</li>
<li>
<p><code>hazelcast.icmp.max.attempts</code> (default 3) - The maximum number of ping attempts before the member/node gets suspected by the detector.</p>
</li>
<li>
<p><code>hazelcast.icmp.interval</code> (default 1000) - The interval, in milliseconds, between each ping attempt. 1000ms (1 sec) is also the minimum interval allowed.</p>
</li>
<li>
<p><code>hazelcast.icmp.ttl</code> (default 0) - The maximum number of hops the packets should go through or 0 for the default.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the above configuration, the Ping detector will attempt 3 pings, one every second and will wait up-to 1 second for each to complete. If after 3 seconds, there was no successful ping, the member will get suspected.</p>
</div>
<div class="paragraph">
<p>To enforce the [Requirements](#Requirements), the property <code>hazelcast.icmp.echo.fail.fast.on.startup</code> can also be set to <code>true</code>, in which case, if any of the requirements
isn&#8217;t met, Hazelcast will fail to start.</p>
</div>
<div class="paragraph">
<p>Below is a summary table of all possible configuration combinations of the ping failure detector.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Ping Failure Detector Possible Configuration Combinations</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ICMP</th>
<th class="tableblock halign-left valign-top">Parallel</th>
<th class="tableblock halign-left valign-top">Fail-Fast</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Linux</th>
<th class="tableblock halign-left valign-top">Windows</th>
<th class="tableblock halign-left valign-top">macOS</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Completely disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N/A</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Legacy ping mode. This works hand-to-hand with the OSI Layer 7 failure detector (see. phi or deadline in sections above). Ping in this mode will only kick in after a period when there are no hearbeats received, in which case the remote Hazelcast member will be pinged up-to 5 times. If all 5 attempts fail, the member gets suspected.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported  ICMP Echo if available - Falls back on TCP Echo on port 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported  TCP Echo on port 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported ICMP Echo if available - Falls back on TCP Echo on port 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parallel ping detector, works in parallel with the configured failure detector. Checks periodically if members are live (OSI Layer 3), and suspects them immediately, regardless of the other detectors.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported  ICMP Echo if available - Falls back on TCP Echo on port 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported  TCP Echo on port 7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported  ICMP Echo if available - Falls back on TCP Echo on port 7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parallel ping detector, works in parallel with the configured failure detector. Checks periodically if members are live (OSI Layer 3), and suspects them immediately, regardless of the other detectors.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supported - Requires OS Configuration  Enforcing ICMP Echo if available - No start up if not available</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Supported - Requires root privileges</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rolling-member-upgrades"><a class="anchor" href="#rolling-member-upgrades"></a><a class="link" href="#rolling-member-upgrades">6. Rolling Member Upgrades</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong class="blue">Hazelcast IMDG Enterprise</strong></p>
</div>
<div class="paragraph">
<p>This chapter explains the procedure of upgrading the version of Hazelcast members in a running cluster without interrupting the operation of the cluster.</p>
</div>
<div class="sect2">
<h3 id="terminology"><a class="anchor" href="#terminology"></a><a class="link" href="#terminology">6.1. Terminology</a></h3>
<div class="ulist">
<ul>
<li>
<p><strong>Minor version</strong>: A version change after the decimal point, e.g., 3.8 and 3.9.</p>
</li>
<li>
<p><strong>Patch version</strong>: A version change after the second decimal point, e.g., 3.8.1 and 3.8.2.</p>
</li>
<li>
<p><strong>Member codebase version</strong>: The <code>major.minor.patch</code> version of the Hazelcast binary on which the member executes. For example, when running on <code>hazelcast-3.8.jar</code>, your member&#8217;s codebase version is <code>3.8.0</code>.</p>
</li>
<li>
<p><strong>Cluster version</strong>: The <code>major.minor</code> version at which the cluster operates. This ensures that cluster members are able to communicate using the same cluster protocol and
determines the feature set exposed by the cluster.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="hazelcast-members-compatibility-guarantees"><a class="anchor" href="#hazelcast-members-compatibility-guarantees"></a><a class="link" href="#hazelcast-members-compatibility-guarantees">6.2. Hazelcast Members Compatibility Guarantees</a></h3>
<div class="paragraph">
<p>Hazelcast members operating on binaries of the same major and minor version numbers are compatible regardless of patch version.
  For example, in a cluster with members running on version 3.7.1, it is possible to perform a rolling upgrade to 3.7.2 by shutting down, upgrading to <code>hazelcast-3.7.2.jar</code> binary
  and starting each member one by one. <em>Patch level compatibility applies to both Hazelcast IMDG and Hazelcast IMDG Enterprise</em>.</p>
</div>
<div class="paragraph">
<p>Starting with Hazelcast IMDG Enterprise 3.8, each next minor version released will be compatible with the previous one. For example, it will
 be possible to perform a rolling upgrade on a cluster running Hazelcast IMDG Enterprise 3.8 to Hazelcast IMDG Enterprise 3.9 whenever that is released.
 <em>Rolling upgrades across minor versions is a Hazelcast IMDG Enterprise feature, starting with version 3.8</em>.</p>
</div>
<div class="paragraph">
<p>The compatibility guarantees described above are given in the context of rolling member upgrades and only apply to GA (general availability) releases. It is never advisable to run a
 cluster with members running on different patch or minor versions for prolonged periods of time.</p>
</div>
</div>
<div class="sect2">
<h3 id="rolling-upgrade-procedure"><a class="anchor" href="#rolling-upgrade-procedure"></a><a class="link" href="#rolling-upgrade-procedure">6.3. Rolling Upgrade Procedure</a></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The version numbers used in the paragraph below are only used as an example.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s assume a cluster with four members running on codebase version <code>3.8.0</code> with cluster version <code>3.8</code>, that should be upgraded to codebase version
<code>3.9.0</code> and cluster version <code>3.9</code>. The rolling upgrade process for this cluster, i.e., replacing existing <code>3.8.0</code> members one by one with an upgraded
one at version <code>3.9.0</code>, includes the following steps which should be repeated for each member:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Shutdown gracefully an existing <code>3.8.0</code> member.</p>
</li>
<li>
<p>Wait until all partition migrations are completed; during migrations, membership changes (member joins or removals) are not allowed.</p>
</li>
<li>
<p>Update the member with the new <code>3.9.0</code> Hazelcast binaries.</p>
</li>
<li>
<p>Start the member and wait until it joins the cluster. You should see something like the following in your logs:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">...
INFO: [<span class="float">192.168</span><span class="float">.2</span><span class="float">.2</span>]:<span class="integer">5701</span> [cluster] [<span class="float">3.9</span>] Hazelcast <span class="float">3.9</span> (<span class="integer">20170630</span> - a67dc3a) starting at [<span class="float">192.168</span><span class="float">.2</span><span class="float">.2</span>]:<span class="integer">5701</span>
...
INFO: [<span class="float">192.168</span><span class="float">.2</span><span class="float">.2</span>]:<span class="integer">5701</span> [cluster] [<span class="float">3.9</span>] Cluster version set to <span class="float">3.8</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The version in brackets <code>[3.9]</code> still denotes the member&#8217;s codebase version (running on the hypothetical <code>hazelcast-3.9.jar</code> binary). Once the member
 locates existing cluster members, it sends its join request to the master. The master validates that the new member is allowed to join the cluster and
 lets the new member know that the cluster is currently operating at <code>3.8</code> cluster version. The new member sets <code>3.8</code> as its cluster version and starts operating
 normally.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>At this point all members of the cluster have been upgraded to codebase version `3.9.0` but the cluster still operates at cluster version `3.8`. In order to use `3.9` features
the cluster version must be changed to `3.9`. There are two ways to accomplish this:</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <a href="http://docs.hazelcast.org/docs/management-center/latest/manual/html/index.html#rolling-upgrade">Management Center</a>.</p>
</li>
<li>
<p>Use the command line <a href="#using-the-script-cluster-sh">cluster.sh script</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need to upgrade your Management Center version <strong>before</strong> upgrading the member version if you want to
change cluster version using Management Center. Management Center is compatible with the previous minor version of
Hazelcast, starting with version 3.9. For example, Management Center 3.9 works with both Hazelcast IMDG
3.8 and 3.9. To change your cluster version to 3.9, you need Management Center 3.9.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="network-partitions-and-rolling-upgrades"><a class="anchor" href="#network-partitions-and-rolling-upgrades"></a><a class="link" href="#network-partitions-and-rolling-upgrades">6.4. Network Partitions and Rolling Upgrades</a></h3>
<div class="paragraph">
<p>In the event of network partitions which split your cluster into two subclusters, split brain handling works as explained in the <a href="#network-partitioning">Network Partitioning section</a>, with the
additional constraint that two subclusters will only merge as long as they operate on the same cluster version. This is a requirement to ensure that all members participating
in each one of the subclusters will be able to operate as members of the merged cluster at the same cluster version.</p>
</div>
<div class="paragraph">
<p>With regards to rolling upgrades, the above constraint implies that if a network partition occurs while a change of cluster version is in progress, then with some unlucky timing, one subcluster may be upgraded to the new cluster version and another subcluster may have upgraded members but still operate at the old cluster version.</p>
</div>
<div class="paragraph">
<p>In order for the two subclusters to merge, it is necessary to change the cluster version of the subcluster that still operates at the old cluster version, so that both subclusters
will be operating at the same, upgraded cluster version and will be able to merge as soon as the network partition is fixed.</p>
</div>
</div>
<div class="sect2">
<h3 id="rolling-upgrade-faq"><a class="anchor" href="#rolling-upgrade-faq"></a><a class="link" href="#rolling-upgrade-faq">6.5. Rolling Upgrade FAQ</a></h3>
<div class="paragraph">
<p>The following provide answers to the frequently asked questions related to rolling member upgrades.</p>
</div>
<div class="paragraph">
<p><strong>How is the cluster version set?</strong></p>
</div>
<div class="paragraph">
<p>When a new member starts, it is not yet joined to a cluster; therefore its cluster version is still undetermined. In order for the cluster version to be
set, one of the following must happen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the member cannot locate any members of the cluster to join or is configured without a joiner: in this case, the member will appoint itself as the master of a new single-member cluster and its cluster version will be set to the <code>major.minor</code> version of its own codebase version. So a standalone member running on codebase version <code>3.8.0</code> will set its own cluster version to <code>3.8</code>.</p>
</li>
<li>
<p>the member that is starting locates members of the cluster and identifies which is the master: in this case, the master will validate that the joining member&#8217;s codebase version is compatible with the current cluster version. If it is found to be compatible, then the member joins and the master sends the cluster version, which is set on the joining member. Otherwise, the starting member fails to join and shuts down.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>What if a new Hazelcast minor version changes fundamental cluster protocol communication, like join messages?</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The version numbers used in the paragraph below are only used as an example.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On startup, as answered in the above question (How is the cluster version set?), the cluster version is not yet known to a member that has not joined any cluster.
By default the newly started member will use the cluster protocol that corresponds to its codebase version until this member joins a cluster
(so for codebase <code>3.9.0</code> this means implicitly assuming cluster version <code>3.9</code>). If, hypothetically, major changes in discovery &amp; join operations
have been introduced which do not allow the member to join a <code>3.8</code> cluster, then the member should be explicitly configured to start
assuming a <code>3.8</code> cluster version.</p>
</div>
<div class="paragraph">
<p><strong>Do I have to upgrade clients to work with rolling upgrades?</strong></p>
</div>
<div class="paragraph">
<p>Starting with Hazelcast 3.6, the Hazelcast Open Binary Client Protocol was introduced. Clients which implement the Open Binary Client Protocol
are compatible with Hazelcast version 3.6 and newer minor versions. Thus older client versions will be compatible with next minor versions. Newer clients
connected to a cluster will operate at the lower version of capabilities until all members are upgraded and the cluster version upgrade occurs.</p>
</div>
<div class="paragraph">
<p><strong>Can I stop and start multiple members at once during a rolling member upgrade?</strong></p>
</div>
<div class="paragraph">
<p>It is not recommended due to potential network partitions. It is advised to always stop and start one member in each upgrade step.</p>
</div>
<div class="paragraph">
<p><strong>Can I upgrade my business app together with Hazelcast while doing a rolling member upgrade?</strong></p>
</div>
<div class="paragraph">
<p>Yes, but make sure to make the new version of your app compatible with the old one since there will be a timespan when both versions interoperate. Checking if two versions of your app are compatible includes verifying binary and algorithmic compatibility, and some other steps.</p>
</div>
<div class="paragraph">
<p>It is worth mentioning that a business app upgrade is orthogonal to a rolling member upgrade. A rolling business app upgrade may be done without upgrading the members.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-03-26 12:37:29 MSK
</div>
</div>
</body>
</html>